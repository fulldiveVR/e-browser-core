(()=>{var e={168:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringify=void 0;const r=n(8348),s=n(5257),o=Object.prototype.hasOwnProperty,i={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},a=Array.isArray,c=Array.prototype.push,l=function(e,t){c.apply(e,a(t)?t:[t])},u=Date.prototype.toISOString,d={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:r.encode,encodeValuesOnly:!1,format:s.default_format,formatter:s.formatters[s.default_format],indices:!1,serializeDate:e=>u.call(e),skipNulls:!1,strictNullHandling:!1};const p={};function h(e,t,n,s,o,i,c,u,f,m,g,y,b,w,v,_,P,O){let E=e,A=O,S=0,R=!1;for(;void 0!==(A=A.get(p))&&!R;){const t=A.get(e);if(S+=1,"undefined"!==typeof t){if(t===S)throw new RangeError("Cyclic object value");R=!0}"undefined"===typeof A.get(p)&&(S=0)}if("function"===typeof m?E=m(t,E):E instanceof Date?E=b?.(E):"comma"===n&&a(E)&&(E=(0,r.maybe_map)(E,function(e){return e instanceof Date?b?.(e):e})),null===E){if(i)return f&&!_?f(t,d.encoder,P,"key",w):t;E=""}if("string"===typeof(C=E)||"number"===typeof C||"boolean"===typeof C||"symbol"===typeof C||"bigint"===typeof C||(0,r.is_buffer)(E)){if(f){const e=_?t:f(t,d.encoder,P,"key",w);return[v?.(e)+"="+v?.(f(E,d.encoder,P,"value",w))]}return[v?.(t)+"="+v?.(String(E))]}var C;const x=[];if("undefined"===typeof E)return x;let j;if("comma"===n&&a(E))_&&f&&(E=(0,r.maybe_map)(E,f)),j=[{value:E.length>0?E.join(",")||null:void 0}];else if(a(m))j=m;else{const e=Object.keys(E);j=g?e.sort(g):e}const I=u?String(t).replace(/\./g,"%2E"):String(t),T=s&&a(E)&&1===E.length?I+"[]":I;if(o&&a(E)&&0===E.length)return T+"[]";for(let r=0;r<j.length;++r){const t=j[r],d="object"===typeof t&&"undefined"!==typeof t.value?t.value:E[t];if(c&&null===d)continue;const A=y&&u?t.replace(/\./g,"%2E"):t,R=a(E)?"function"===typeof n?n(T,A):T:T+(y?"."+A:"["+A+"]");O.set(e,S);const C=new WeakMap;C.set(p,O),l(x,h(d,R,n,s,o,i,c,u,"comma"===n&&_&&a(E)?null:f,m,g,y,b,w,v,_,P,C))}return x}t.stringify=function(e,t={}){let n=e;const r=function(e=d){if("undefined"!==typeof e.allowEmptyArrays&&"boolean"!==typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if("undefined"!==typeof e.encodeDotInKeys&&"boolean"!==typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&"undefined"!==typeof e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||d.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=s.default_format;if("undefined"!==typeof e.format){if(!o.call(s.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=s.formatters[n];let c,l=d.filter;if(("function"===typeof e.filter||a(e.filter))&&(l=e.filter),c=e.arrayFormat&&e.arrayFormat in i?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":d.arrayFormat,"commaRoundTrip"in e&&"boolean"!==typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const u="undefined"===typeof e.allowDots?!0===!!e.encodeDotInKeys||d.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:u,allowEmptyArrays:"boolean"===typeof e.allowEmptyArrays?!!e.allowEmptyArrays:d.allowEmptyArrays,arrayFormat:c,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:"undefined"===typeof e.delimiter?d.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:d.encode,encodeDotInKeys:"boolean"===typeof e.encodeDotInKeys?e.encodeDotInKeys:d.encodeDotInKeys,encoder:"function"===typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:l,format:n,formatter:r,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}}(t);let c,u;"function"===typeof r.filter?(u=r.filter,n=u("",n)):a(r.filter)&&(u=r.filter,c=u);const p=[];if("object"!==typeof n||null===n)return"";const f=i[r.arrayFormat],m="comma"===f&&r.commaRoundTrip;c||(c=Object.keys(n)),r.sort&&c.sort(r.sort);const g=new WeakMap;for(let s=0;s<c.length;++s){const e=c[s];r.skipNulls&&null===n[e]||l(p,h(n[e],e,f,m,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,g))}const y=p.join(r.delimiter);let b=!0===r.addQueryPrefix?"?":"";return r.charsetSentinel&&("iso-8859-1"===r.charset?b+="utf8=%26%2310003%3B&":b+="utf8=%E2%9C%93&"),y.length>0?b+y:""}},169:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=null;"undefined"!==typeof WebSocket?r=WebSocket:"undefined"!==typeof MozWebSocket?r=MozWebSocket:"undefined"!==typeof n.g?r=n.g.WebSocket||n.g.MozWebSocket:"undefined"!==typeof window?r=window.WebSocket||window.MozWebSocket:"undefined"!==typeof self&&(r=self.WebSocket||self.MozWebSocket);const s=r},204:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Checkpoints=void 0;const i=n(2802),a=o(n(5595)),c=n(5595);class l extends i.APIResource{constructor(){super(...arguments),this.permissions=new a.Permissions(this._client)}}t.Checkpoints=l,l.Permissions=c.Permissions,l.PermissionCreateResponsesPage=c.PermissionCreateResponsesPage},331:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRuntime=void 0;const r=n(4356);t.getRuntime=function({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,s,o,i;try{n=fetch,s=Request,o=Response,i=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${t}`)}return{kind:"web",fetch:n,Request:s,Response:o,Headers:i,FormData:"undefined"!==typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!==typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!==typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!==typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new r.MultipartBody(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}},460:function(e,t,n){"use strict";var r,s,o,i,a,c,l,u,d,p,h,f,m,g=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},y=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.EventStream=void 0;const b=n(9526);t.EventStream=class{constructor(){r.add(this),this.controller=new AbortController,s.set(this,void 0),o.set(this,()=>{}),i.set(this,()=>{}),a.set(this,void 0),c.set(this,()=>{}),l.set(this,()=>{}),u.set(this,{}),d.set(this,!1),p.set(this,!1),h.set(this,!1),f.set(this,!1),g(this,s,new Promise((e,t)=>{g(this,o,e,"f"),g(this,i,t,"f")}),"f"),g(this,a,new Promise((e,t)=>{g(this,c,e,"f"),g(this,l,t,"f")}),"f"),y(this,s,"f").catch(()=>{}),y(this,a,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},y(this,r,"m",m).bind(this))},0)}_connected(){this.ended||(y(this,o,"f").call(this),this._emit("connect"))}get ended(){return y(this,d,"f")}get errored(){return y(this,p,"f")}get aborted(){return y(this,h,"f")}abort(){this.controller.abort()}on(e,t){return(y(this,u,"f")[e]||(y(this,u,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=y(this,u,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(y(this,u,"f")[e]||(y(this,u,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{g(this,f,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){g(this,f,!0,"f"),await y(this,a,"f")}_emit(e,...t){if(y(this,d,"f"))return;"end"===e&&(g(this,d,!0,"f"),y(this,c,"f").call(this));const n=y(this,u,"f")[e];if(n&&(y(this,u,"f")[e]=n.filter(e=>!e.once),n.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return y(this,f,"f")||n?.length||Promise.reject(e),y(this,i,"f").call(this,e),y(this,l,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];y(this,f,"f")||n?.length||Promise.reject(e),y(this,i,"f").call(this,e),y(this,l,"f").call(this,e),this._emit("end")}}_emitFinal(){}},s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap,r=new WeakSet,m=function(e){if(g(this,p,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new b.APIUserAbortError),e instanceof b.APIUserAbortError)return g(this,h,!0,"f"),this._emit("abort",e);if(e instanceof b.OpenAIError)return this._emit("error",e);if(e instanceof Error){const t=new b.OpenAIError(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new b.OpenAIError(String(e)))}},477:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseItemsPage=t.Responses=void 0;const i=n(7759),a=n(2802),c=o(n(5856)),l=n(5856),u=n(6636),d=n(2510);class p extends a.APIResource{constructor(){super(...arguments),this.inputItems=new c.InputItems(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&(0,i.addOutputText)(e),e))}retrieve(e,t={},n){return this._client.get(`/responses/${e}`,{query:t,...n,stream:t?.stream??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>(0,i.parseResponse)(t,e))}stream(e,t){return u.ResponseStream.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...t?.headers}})}}t.Responses=p;class h extends d.CursorPage{}t.ResponseItemsPage=h,p.InputItems=l.InputItems},1109:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputItemListResponsesPage=t.OutputItems=void 0;const r=n(2802),s=n(8757),o=n(2510);class i extends r.APIResource{retrieve(e,t,n,r){return this._client.get(`/evals/${e}/runs/${t}/output_items/${n}`,r)}list(e,t,n={},r){return(0,s.isRequestOptions)(n)?this.list(e,t,{},n):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,a,{query:n,...r})}}t.OutputItems=i;class a extends o.CursorPage{}t.OutputItemListResponsesPage=a,i.OutputItemListResponsesPage=a},1118:function(e,t,n){"use strict";var r,s,o,i,a,c,l,u,d=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractChatCompletionRunner=void 0;const p=n(9526),h=n(4691),f=n(6289),m=n(460),g=n(3357),y=10;class b extends m.EventStream{constructor(){super(...arguments),r.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),((0,f.isFunctionMessage)(e)||(0,f.isToolMessage)(e))&&e.content)this._emit("functionCallResult",e.content);else if((0,f.isAssistantMessage)(e)&&e.function_call)this._emit("functionCall",e.function_call);else if((0,f.isAssistantMessage)(e)&&e.tool_calls)for(const n of e.tool_calls)"function"===n.type&&this._emit("functionCall",n.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new p.OpenAIError("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),d(this,r,"m",s).call(this)}async finalMessage(){return await this.done(),d(this,r,"m",o).call(this)}async finalFunctionCall(){return await this.done(),d(this,r,"m",i).call(this)}async finalFunctionCallResult(){return await this.done(),d(this,r,"m",a).call(this)}async totalUsage(){return await this.done(),d(this,r,"m",c).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=d(this,r,"m",o).call(this);t&&this._emit("finalMessage",t);const n=d(this,r,"m",s).call(this);n&&this._emit("finalContent",n);const l=d(this,r,"m",i).call(this);l&&this._emit("finalFunctionCall",l);const u=d(this,r,"m",a).call(this);null!=u&&this._emit("finalFunctionCallResult",u),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",d(this,r,"m",c).call(this))}async _createChatCompletion(e,t,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),d(this,r,"m",l).call(this,t);const o=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion((0,g.parseChatCompletion)(o,t))}async _runChatCompletion(e,t,n){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){const s="function",{function_call:o="auto",stream:i,...a}=t,c="string"!==typeof o&&o?.name,{maxChatCompletions:l=y}=n||{},f={};for(const r of t.functions)f[r.name||r.function.name]=r;const m=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(const r of t.messages)this._addMessage(r,!1);for(let y=0;y<l;++y){const t=await this._createChatCompletion(e,{...a,function_call:o,functions:m,messages:[...this.messages]},n),i=t.choices[0]?.message;if(!i)throw new p.OpenAIError("missing message in ChatCompletion response");if(!i.function_call)return;const{name:l,arguments:y}=i.function_call,b=f[l];if(!b){const e=`Invalid function_call: ${JSON.stringify(l)}. Available options are: ${m.map(e=>JSON.stringify(e.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:l,content:e});continue}if(c&&c!==l){const e=`Invalid function_call: ${JSON.stringify(l)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:s,name:l,content:e});continue}let w;try{w=(0,h.isRunnableFunctionWithParse)(b)?await b.parse(y):y}catch(g){this._addMessage({role:s,name:l,content:g instanceof Error?g.message:String(g)});continue}const v=await b.function(w,this),_=d(this,r,"m",u).call(this,v);if(this._addMessage({role:s,name:l,content:_}),c)return}}async _runTools(e,t,n){const s="tool",{tool_choice:o="auto",stream:i,...a}=t,c="string"!==typeof o&&o?.function?.name,{maxChatCompletions:l=y}=n||{},f=t.tools.map(e=>{if((0,g.isAutoParsableTool)(e)){if(!e.$callback)throw new p.OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),m={};for(const r of f)"function"===r.type&&(m[r.function.name||r.function.function.name]=r.function);const b="tools"in t?f.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(const r of t.messages)this._addMessage(r,!1);for(let g=0;g<l;++g){const t=await this._createChatCompletion(e,{...a,tool_choice:o,tools:b,messages:[...this.messages]},n),i=t.choices[0]?.message;if(!i)throw new p.OpenAIError("missing message in ChatCompletion response");if(!i.tool_calls?.length)return;for(const e of i.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:n,arguments:o}=e.function,i=m[n];if(!i){const e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${Object.keys(m).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:t,content:e});continue}if(c&&c!==n){const e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:s,tool_call_id:t,content:e});continue}let a;try{a=(0,h.isRunnableFunctionWithParse)(i)?await i.parse(o):o}catch(w){const e=w instanceof Error?w.message:String(w);this._addMessage({role:s,tool_call_id:t,content:e});continue}const l=await i.function(a,this),p=d(this,r,"m",u).call(this,l);if(this._addMessage({role:s,tool_call_id:t,content:p}),c)return}}}}t.AbstractChatCompletionRunner=b,r=new WeakSet,s=function(){return d(this,r,"m",o).call(this).content??null},o=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if((0,f.isAssistantMessage)(t)){const{function_call:e,...n}=t,r={...n,content:t.content??null,refusal:t.refusal??null};return e&&(r.function_call=e),r}}throw new p.OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},i=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if((0,f.isAssistantMessage)(t)&&t?.function_call)return t.function_call;if((0,f.isAssistantMessage)(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},a=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if((0,f.isFunctionMessage)(t)&&null!=t.content)return t.content;if((0,f.isToolMessage)(t)&&null!=t.content&&"string"===typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},c=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},l=function(e){if(null!=e.n&&e.n>1)throw new p.OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},u=function(e){return"string"===typeof e?e:void 0===e?"undefined":JSON.stringify(e)}},1242:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Embeddings=void 0;const i=n(2802),a=o(n(8757));class c extends i.APIResource{create(e,t){const n=!!e.encoding_format;let r=n?e.encoding_format:"base64";n&&a.debug("Request","User defined encoding_format:",e.encoding_format);const s=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return n?s:(a.debug("response","Decoding base64 embeddings to float32 array"),s._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{const t=e.embedding;e.embedding=a.toFloat32Array(t)}),e)))}}t.Embeddings=c},1253:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Audio=void 0;const i=n(2802),a=o(n(5113)),c=n(5113),l=o(n(3694)),u=n(3694),d=o(n(7655)),p=n(7655);class h extends i.APIResource{constructor(){super(...arguments),this.transcriptions=new l.Transcriptions(this._client),this.translations=new d.Translations(this._client),this.speech=new a.Speech(this._client)}}t.Audio=h,h.Transcriptions=u.Transcriptions,h.Translations=p.Translations,h.Speech=c.Speech},1356:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chat=void 0;const i=n(2802),a=o(n(8111));class c extends i.APIResource{constructor(){super(...arguments),this.completions=new a.Completions(this._client)}}t.Chat=c,function(e){e.Completions=a.Completions}(c=t.Chat||(t.Chat={}))},1461:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FileObjectsPage=t.Files=void 0;const i=n(2802),a=n(8757),c=n(8757),l=n(9526),u=o(n(8757)),d=n(2510);class p extends i.APIResource{create(e,t){return this._client.post("/files",u.multipartFormRequestOptions({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return(0,a.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/files",h,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t?.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=18e5}={}){const r=new Set(["processed","error","deleted"]),s=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await(0,c.sleep)(t),o=await this.retrieve(e),Date.now()-s>n)throw new l.APIConnectionTimeoutError({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}}t.Files=p;class h extends d.CursorPage{}t.FileObjectsPage=h,p.FileObjectsPage=h},1718:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FineTuningJobEventsPage=t.FineTuningJobsPage=t.Jobs=void 0;const i=n(2802),a=n(8757),c=o(n(3955)),l=n(3955),u=n(2510);class d extends i.APIResource{constructor(){super(...arguments),this.checkpoints=new c.Checkpoints(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return(0,a.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",p,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return(0,a.isRequestOptions)(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,h,{query:t,...n})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}t.Jobs=d;class p extends u.CursorPage{}t.FineTuningJobsPage=p;class h extends u.CursorPage{}t.FineTuningJobEventsPage=h,d.FineTuningJobsPage=p,d.FineTuningJobEventsPage=h,d.Checkpoints=l.Checkpoints,d.FineTuningJobCheckpointsPage=l.FineTuningJobCheckpointsPage},1728:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PendingLabelingQueue=void 0;const r=n(2321);t.PendingLabelingQueue=class{constructor(e,t,n){this.staleThresholdMs=e,this.sender=t,this.pendingMap=new Map,this.contentMerger=n||new r.ContentMerger({similarityThreshold:.85,enableFuzzyMatching:!0,preserveWhitespace:!1})}enqueue(e){const{url:t,title:n,description:r,keywords:s,content:o,behavior:i}=e;if(!t)return;const a=this.pendingMap.get(t);a?(a.content=this.contentMerger.merge(a.content,o),a.behavior=i,a.lastUpdated=Date.now()):this.pendingMap.set(t,{content:o,title:n,description:r,keywords:s,behavior:i,lastUpdated:Date.now()})}async flush(e=Date.now()){let t=0;for(const[r,s]of Array.from(this.pendingMap.entries())){if(e-s.lastUpdated<this.staleThresholdMs)continue;const o=this.buildLabelingRequest(r,s);try{await this.sender(o),this.pendingMap.delete(r),t+=1}catch(n){s.lastUpdated=Date.now()}}return t}async flushSpecific(e){const t=this.pendingMap.get(e);if(!t)return;const n=this.buildLabelingRequest(e,t);try{await this.sender(n),this.pendingMap.delete(e)}catch(r){}}hasPending(e){return this.pendingMap.has(e)}buildLabelingRequest(e,t){return{content:t.content,metadata:{title:t.title,url:e,description:t.description,keywords:t.keywords.join(", ")},behavior:t.behavior}}}},1946:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RunsPage=t.Runs=void 0;const i=n(2802),a=n(8757),c=n(8868),l=n(8757),u=o(n(7733)),d=n(7733),p=n(2510);class h extends i.APIResource{constructor(){super(...arguments),this.steps=new u.Steps(this._client)}create(e,t,n){const{include:r,...s}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:s,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return(0,a.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,f,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return c.AssistantStream.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:s,response:o}=await this.retrieve(e,t,{...n,headers:{...n?.headers,...r}}).withResponse();switch(s.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await(0,l.sleep)(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return s}}}stream(e,t,n){return c.AssistantStream.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){const s=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,s.id,r)}submitToolOutputsStream(e,t,n,r){return c.AssistantStream.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}}t.Runs=h;class f extends p.CursorPage{}t.RunsPage=f,h.RunsPage=f,h.Steps=d.Steps,h.RunStepsPage=d.RunStepsPage},1985:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContentHandlingScript=void 0;const s=n(3543),o=n(2745),i=n(2270),a=r(n(2012)),c=r(n(2761)),l=n(1728);t.ContentHandlingScript=class{constructor(){this.contentCache=new Map,this.tabUrlMap=new Map,this.coordsCache=new Map,this.FLUSH_INTERVAL_MS=1e4,this.STALE_THRESHOLD_MS=1e4,this.contextClient=s.ContextClient.getInstance(),this.domainFilterClient=i.DomainFilterClient.getInstance(),this.screenshotService=new c.default,this.pendingQueue=new l.PendingLabelingQueue(this.STALE_THRESHOLD_MS,e=>this.contextClient.processLabeling(e)),this.init()}async init(){this.setupTabListener(),this.setupMessageListener(),this.setupShutdownHandlers();try{const e=await this.contextClient.getLabelingTags();await o.StorageUtil.set(o.STORAGE_KEYS.LABELING_TAGS,e)}catch(e){}this.startFlushTimer()}setupTabListener(){chrome.tabs.onUpdated.addListener((e,t,n)=>{"complete"===t.status&&n.url&&(n.url.startsWith("http://")||n.url.startsWith("https://"))})}setupMessageListener(){chrome.runtime.onMessage.addListener(this.handleMessage.bind(this))}setupShutdownHandlers(){chrome.windows.onRemoved.addListener(async e=>{chrome.windows.getAll({},async e=>{0===e.length&&await this.flushPendingLabeling()})}),chrome.tabs.onRemoved.addListener(async e=>{const t=this.contentCache.get(e);let n=t?.url;n||(n=this.tabUrlMap.get(e)),n&&this.pendingQueue.hasPending(n)&&await this.flushSpecificUrl(n),this.contentCache.delete(e),this.tabUrlMap.delete(e)}),chrome.runtime.onSuspend.addListener(()=>{this.flushPendingLabeling().catch(e=>{})})}async handleMessage(e,t,n){switch(e.type){case"SEND_CONTENT_TO_LABELING":return this.enqueueLabelingData({url:e.content?.url,title:e.content?.title,description:e.content?.meta?.description||"",keywords:e.content?.meta?.keywords||[],content:e.content?.content||"",behavior:e.behavior,tabId:t.tab?.id}),n({success:!0}),!1;case"VISUAL_EXTRACT":{const t=e.behavior;return await this.handleVisualContentExtraction(n,t),!0}}return!1}enqueueLabelingData(e){this.pendingQueue.enqueue(e),void 0!==e.tabId&&this.tabUrlMap.set(e.tabId,e.url)}startFlushTimer(){void 0===this.flushTimerId&&(this.flushTimerId=setInterval(()=>{this.flushPendingLabeling().catch(e=>{})},this.FLUSH_INTERVAL_MS))}async flushPendingLabeling(){await this.pendingQueue.flush()}async flushSpecificUrl(e){await this.pendingQueue.flushSpecific(e)}async findMainContentWithAI(e){try{const t=await this.contextClient.getLlmToken(),n=await this.contextClient.getExternalLlmBaseUrl(),r=new a.default({apiKey:t,baseURL:n,dangerouslyAllowBrowser:!0}),s='Find the MAIN CONTENT BLOCK on this webpage - the primary article or central text area.\n\nRules:\n- DO NOT select the entire page, only the actual content area (typically 30-70% of page)\n- EXCLUDE: navigation, headers, footers, sidebars, ads, comments, related articles\n- INCLUDE: main article body or primary information block\n- Look for visual boundaries (backgrounds, borders) that separate main content\n\nReturn ONLY JSON: {"box_2d": [y_min, x_min, y_max, x_max]} with values 0-1000.',o=await r.chat.completions.create({model:"meta-llama/llama-4-maverick",temperature:.1,reasoning:{max_tokens:0},extra_body:{thinkingConfig:{thinkingBudget:0}},messages:[{role:"user",content:[{type:"text",text:s},{type:"image_url",image_url:{url:e}}]}]}),i=o?.choices?.[0]?.message?.content,c=("string"===typeof i?i:Array.isArray(i)?i.map(e=>e?.text||e?.content||"").join(" "):"").match(/\{[\s\S]*\}/);return c?JSON.parse(c[0]):null}catch(t){throw t}}async handleVisualContentExtraction(e,t){try{const n=await new Promise(e=>chrome.tabs.query({active:!0,currentWindow:!0},t=>e(t[0]))),r=n?.url||"";if(!r)return void e({success:!1,error:"No active tab URL"});try{const t=await this.domainFilterClient.checkDomain(r);if(t?.isBlocked)return void e({success:!1,error:"Tab is blocked"})}catch{}const s=await this.contextClient.getSelector(r);if(s?.selector)chrome.tabs.query({active:!0,currentWindow:!0},n=>{n[0]?.id?chrome.tabs.sendMessage(n[0].id,{type:"SELECTOR_EXTRACT",selector:s.selector},async s=>{if(chrome.runtime.lastError||!s?.success)await this.performAIExtraction(e,r,t);else{const r={title:n[0].title||"Content",url:n[0].url||"",content:s.content,meta:{description:"selector extract",timestamp:(new Date).toISOString()}};this.enqueueLabelingData({url:r.url,title:r.title,description:r.meta.description||"",keywords:[],content:r.content,behavior:t,tabId:n[0].id}),e({success:!0,content:s.content})}}):e({success:!1,error:"No active tab"})});else if(this.coordsCache.has(r)){const t=this.coordsCache.get(r);chrome.tabs.query({active:!0,currentWindow:!0},n=>{n[0]?.id?chrome.tabs.sendMessage(n[0].id,{type:"VISUAL_CONTENT_COORDS",coordinates:t,generateSelector:!1},t=>{chrome.runtime.lastError?e({success:!1,error:chrome.runtime.lastError.message}):e({success:!0,content:t?.content})}):e({success:!1,error:"No active tab"})})}else await this.performAIExtraction(e,r,t)}catch(n){e({success:!1,error:String(n)})}}async performAIExtraction(e,t,n){try{const r=await this.screenshotService.captureScreenshot(),s=await this.findMainContentWithAI(r);if(!s)throw new Error("Unable to identify content");this.coordsCache.set(t,s),chrome.tabs.query({active:!0,currentWindow:!0},t=>{t[0]?.id?chrome.tabs.sendMessage(t[0].id,{type:"VISUAL_CONTENT_COORDS",coordinates:s,generateSelector:!0},r=>{if(chrome.runtime.lastError)e({success:!1,error:chrome.runtime.lastError.message});else{if(r?.content){const e={title:t[0].title||"Visual Extract",url:t[0].url||"",content:r.content,meta:{description:"AI visual extraction",timestamp:(new Date).toISOString()}};this.enqueueLabelingData({url:e.url,title:e.title,description:e.meta.description||"",keywords:[],content:e.content,behavior:n,tabId:t[0].id})}e({success:!0,content:r?.content})}}):e({success:!1,error:"No active tab"})})}catch(r){e({success:!1,error:String(r)})}}}},2012:function(e,t,n){"use strict";var r,s=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.UnprocessableEntityError=t.PermissionDeniedError=t.InternalServerError=t.AuthenticationError=t.BadRequestError=t.RateLimitError=t.ConflictError=t.NotFoundError=t.APIUserAbortError=t.APIConnectionTimeoutError=t.APIConnectionError=t.APIError=t.OpenAIError=t.fileFromPath=t.toFile=t.AzureOpenAI=t.OpenAI=void 0;const a=i(n(3822)),c=i(n(8757)),l=i(n(9526)),u=(i(n(2510)),i(n(4042))),d=i(n(3946)),p=n(2530),h=n(9045),f=n(1242),m=n(1461),g=n(7370),y=n(9458),b=n(4975),w=n(1253),v=n(6183),_=n(6111),P=n(2099),O=n(4769),E=n(3453),A=n(9777),S=n(477),R=n(3017),C=n(4229),x=n(3054);class j extends c.APIClient{constructor({baseURL:e=c.readEnv("OPENAI_BASE_URL"),apiKey:t=c.readEnv("OPENAI_API_KEY"),organization:n=c.readEnv("OPENAI_ORG_ID")??null,project:r=c.readEnv("OPENAI_PROJECT_ID")??null,...s}={}){if(void 0===t)throw new l.OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:n,project:r,...s,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&c.isRunningInBrowser())throw new l.OpenAIError("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new d.Completions(this),this.chat=new d.Chat(this),this.embeddings=new d.Embeddings(this),this.files=new d.Files(this),this.images=new d.Images(this),this.audio=new d.Audio(this),this.moderations=new d.Moderations(this),this.models=new d.Models(this),this.fineTuning=new d.FineTuning(this),this.graders=new d.Graders(this),this.vectorStores=new d.VectorStores(this),this.beta=new d.Beta(this),this.batches=new d.Batches(this),this.uploads=new d.Uploads(this),this.responses=new d.Responses(this),this.evals=new d.Evals(this),this.containers=new d.Containers(this),this._options=o,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return a.stringify(e,{arrayFormat:"brackets"})}}t.OpenAI=j,r=j,j.OpenAI=r,j.DEFAULT_TIMEOUT=6e5,j.OpenAIError=l.OpenAIError,j.APIError=l.APIError,j.APIConnectionError=l.APIConnectionError,j.APIConnectionTimeoutError=l.APIConnectionTimeoutError,j.APIUserAbortError=l.APIUserAbortError,j.NotFoundError=l.NotFoundError,j.ConflictError=l.ConflictError,j.RateLimitError=l.RateLimitError,j.BadRequestError=l.BadRequestError,j.AuthenticationError=l.AuthenticationError,j.InternalServerError=l.InternalServerError,j.PermissionDeniedError=l.PermissionDeniedError,j.UnprocessableEntityError=l.UnprocessableEntityError,j.toFile=u.toFile,j.fileFromPath=u.fileFromPath,j.Completions=h.Completions,j.Chat=_.Chat,j.ChatCompletionsPage=x.ChatCompletionsPage,j.Embeddings=f.Embeddings,j.Files=m.Files,j.FileObjectsPage=m.FileObjectsPage,j.Images=g.Images,j.Audio=w.Audio,j.Moderations=b.Moderations,j.Models=y.Models,j.ModelsPage=y.ModelsPage,j.FineTuning=E.FineTuning,j.Graders=A.Graders,j.VectorStores=C.VectorStores,j.VectorStoresPage=C.VectorStoresPage,j.VectorStoreSearchResponsesPage=C.VectorStoreSearchResponsesPage,j.Beta=v.Beta,j.Batches=p.Batches,j.BatchesPage=p.BatchesPage,j.Uploads=R.Uploads,j.Responses=S.Responses,j.Evals=O.Evals,j.EvalListResponsesPage=O.EvalListResponsesPage,j.Containers=P.Containers,j.ContainerListResponsesPage=P.ContainerListResponsesPage;class I extends j{constructor({baseURL:e=c.readEnv("OPENAI_BASE_URL"),apiKey:t=c.readEnv("AZURE_OPENAI_API_KEY"),apiVersion:n=c.readEnv("OPENAI_API_VERSION"),endpoint:r,deployment:s,azureADTokenProvider:o,dangerouslyAllowBrowser:i,...a}={}){if(!n)throw new l.OpenAIError("The OPENAI_API_VERSION environment variable is missing or empty; either provide it, or instantiate the AzureOpenAI client with an apiVersion option, like new AzureOpenAI({ apiVersion: 'My API Version' }).");if("function"===typeof o&&(i=!0),!o&&!t)throw new l.OpenAIError("Missing credentials. Please pass one of `apiKey` and `azureADTokenProvider`, or set the `AZURE_OPENAI_API_KEY` environment variable.");if(o&&t)throw new l.OpenAIError("The `apiKey` and `azureADTokenProvider` arguments are mutually exclusive; only one can be passed at a time.");if(t??(t=M),a.defaultQuery={...a.defaultQuery,"api-version":n},e){if(r)throw new l.OpenAIError("baseURL and endpoint are mutually exclusive")}else{if(r||(r=process.env.AZURE_OPENAI_ENDPOINT),!r)throw new l.OpenAIError("Must provide one of the `baseURL` or `endpoint` arguments, or the `AZURE_OPENAI_ENDPOINT` environment variable");e=`${r}/openai`}super({apiKey:t,baseURL:e,...a,...void 0!==i?{dangerouslyAllowBrowser:i}:{}}),this.apiVersion="",this._azureADTokenProvider=o,this.apiVersion=n,this.deploymentName=s}buildRequest(e,t={}){if(T.has(e.path)&&"post"===e.method&&void 0!==e.body){if(!c.isObj(e.body))throw new Error("Expected request body to be an object");const t=this.deploymentName||e.body.model||e.__metadata?.model;void 0===t||this.baseURL.includes("/deployments")||(e.path=`/deployments/${t}${e.path}`)}return super.buildRequest(e,t)}async _getAzureADToken(){if("function"===typeof this._azureADTokenProvider){const e=await this._azureADTokenProvider();if(!e||"string"!==typeof e)throw new l.OpenAIError(`Expected 'azureADTokenProvider' argument to return a string but it returned ${e}`);return e}}authHeaders(e){return{}}async prepareOptions(e){if(e.headers?.["api-key"])return super.prepareOptions(e);const t=await this._getAzureADToken();if(e.headers??(e.headers={}),t)e.headers.Authorization=`Bearer ${t}`;else{if(this.apiKey===M)throw new l.OpenAIError("Unable to handle auth");e.headers["api-key"]=this.apiKey}return super.prepareOptions(e)}}t.AzureOpenAI=I;const T=new Set(["/completions","/chat/completions","/embeddings","/audio/transcriptions","/audio/translations","/audio/speech","/images/generations","/images/edits"]),M="<Missing Key>";var k=n(4042);Object.defineProperty(t,"toFile",{enumerable:!0,get:function(){return k.toFile}}),Object.defineProperty(t,"fileFromPath",{enumerable:!0,get:function(){return k.fileFromPath}});var F=n(9526);Object.defineProperty(t,"OpenAIError",{enumerable:!0,get:function(){return F.OpenAIError}}),Object.defineProperty(t,"APIError",{enumerable:!0,get:function(){return F.APIError}}),Object.defineProperty(t,"APIConnectionError",{enumerable:!0,get:function(){return F.APIConnectionError}}),Object.defineProperty(t,"APIConnectionTimeoutError",{enumerable:!0,get:function(){return F.APIConnectionTimeoutError}}),Object.defineProperty(t,"APIUserAbortError",{enumerable:!0,get:function(){return F.APIUserAbortError}}),Object.defineProperty(t,"NotFoundError",{enumerable:!0,get:function(){return F.NotFoundError}}),Object.defineProperty(t,"ConflictError",{enumerable:!0,get:function(){return F.ConflictError}}),Object.defineProperty(t,"RateLimitError",{enumerable:!0,get:function(){return F.RateLimitError}}),Object.defineProperty(t,"BadRequestError",{enumerable:!0,get:function(){return F.BadRequestError}}),Object.defineProperty(t,"AuthenticationError",{enumerable:!0,get:function(){return F.AuthenticationError}}),Object.defineProperty(t,"InternalServerError",{enumerable:!0,get:function(){return F.InternalServerError}}),Object.defineProperty(t,"PermissionDeniedError",{enumerable:!0,get:function(){return F.PermissionDeniedError}}),Object.defineProperty(t,"UnprocessableEntityError",{enumerable:!0,get:function(){return F.UnprocessableEntityError}}),t=e.exports=j,e.exports.AzureOpenAI=I,t.default=j},2099:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerListResponsesPage=t.Containers=void 0;const i=n(2802),a=n(8757),c=o(n(7924)),l=n(7924),u=n(2510);class d extends i.APIResource{constructor(){super(...arguments),this.files=new c.Files(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return(0,a.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/containers",p,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...t?.headers}})}}t.Containers=d;class p extends u.CursorPage{}t.ContainerListResponsesPage=p,d.ContainerListResponsesPage=p,d.Files=l.Files,d.FileListResponsesPage=l.FileListResponsesPage},2212:(e,t,n)=>{const r=n(3085),s=n(8978);t.init=()=>{r.kind||r.setShims(s.getRuntime(),{auto:!0})};for(const o of Object.keys(r))Object.defineProperty(t,o,{get:()=>r[o]});t.init()},2241:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Methods=void 0;const r=n(2802);class s extends r.APIResource{}t.Methods=s},2268:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Graders=void 0;const r=n(2802);class s extends r.APIResource{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}}t.Graders=s},2270:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomainFilterClient=void 0;const s=n(7024),o=r(n(6425));class i extends s.CombinerRestClient{constructor(){super({}),this.baseUrl=this.baseUrl||"http://localhost:22003"}async blockDomain(e){try{const{data:t}=await o.default.post(`${this.baseUrl}/api/domain-filter/domains/user`,e);return t}catch(t){if(o.default.isAxiosError(t)){const e=t.response?.data?.message||t.response?.data?.error||t.message;throw new Error(e)}throw t}}async checkDomain(e){try{const{data:t}=await o.default.post(`${this.baseUrl}/api/domain-filter/check`,{url:e});return t}catch(t){if(o.default.isAxiosError(t)){const e=t.response?.data?.message||t.response?.data?.error||t.message;throw new Error(e)}throw t}}async updateDomainStatus(e,t){try{const{data:n}=await o.default.patch(`${this.baseUrl}/api/domain-filter/domains/${e}/status`,{enabled:t});return n}catch(n){if(o.default.isAxiosError(n)){const e=n.response?.data?.message||n.response?.data?.error||n.message;throw new Error(e)}throw n}}async updateUrlStatus(e,t){try{const{data:n}=await o.default.patch(`${this.baseUrl}/api/domain-filter/urls/${e}/status`,{enabled:t});return n}catch(n){if(o.default.isAxiosError(n)){const e=n.response?.data?.message||n.response?.data?.error||n.message;throw new Error(e)}throw n}}async addBlockedUrl(e,t){try{const{data:n}=await o.default.post(`${this.baseUrl}/api/domain-filter/urls`,{url:e,description:t});return n}catch(n){if(o.default.isAxiosError(n)){const e=n.response?.data?.message||n.response?.data?.error||n.message;throw new Error(e)}throw n}}static getInstance(){return i.instance||(i.instance=new i),i.instance}}t.DomainFilterClient=i},2321:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultContentMerger=t.ContentMerger=void 0;class n{constructor(e={}){this.config={similarityThreshold:e.similarityThreshold??.85,preserveWhitespace:e.preserveWhitespace??!1,maxMergeSize:e.maxMergeSize??1e5,enableFuzzyMatching:e.enableFuzzyMatching??!0,sentenceDelimiters:e.sentenceDelimiters??[".","!","?"],minSentenceLength:e.minSentenceLength??10}}merge(e,t){if(!e||!e.trim())return t||"";if(!t||!t.trim())return e||"";const n=this.normalize(e),r=this.normalize(t);if(n===r)return e;if(this.isProgressiveLoadingPattern(e,t))return t;const s=n.replace(/\s+/g," ").trim(),o=r.replace(/\s+/g," ").trim(),i=this.findCommonPrefixLength(s,o);if(i>10){const e=s.substring(i).trim(),n=o.substring(i).trim();if(e&&n){const r=/^(update|version|v|rev|revision|comments?)?\s*\(?\d+\)?/i;if(r.test(e)||r.test(n))return t}}if(o.includes(s)&&s.length>10)return t;if(s.includes(o)&&o.length>10)return e;const a=this.findOverlap(e,t);if(a.hasOverlap&&a.confidence>.7)return this.mergeWithOverlap(e,t,a);const c=this.mergeBySentences(e,t);return this.config.maxMergeSize&&c.length>this.config.maxMergeSize?c.substring(0,this.config.maxMergeSize):c}isProgressiveLoadingPattern(e,t){const n=[/loading\.{2,}/i,/loading\s*$/i,/please wait/i,/fetching/i,/updating/i,/refreshing/i,/\.\.\.\s*$/];if(!n.some(t=>t.test(e)))return!1;if(n.some(e=>e.test(t)))return!1;if(t.length>1.5*e.length){let r=e;if(n.forEach(e=>{r=r.replace(e,"").trim()}),r&&t.includes(r))return!0}return!1}splitIntoSentences(e){if(!e)return[];let t=e.replace(/https?:\/\/[^\s]+/g,e=>e.replace(/\./g,"\xa7DOT\xa7")).replace(/\b(?:Mr|Mrs|Ms|Dr|Prof|Sr|Jr)\./g,e=>e.replace(/\./g,"\xa7DOT\xa7")).replace(/\b\d+\.\d+/g,e=>e.replace(/\./g,"\xa7DOT\xa7")).replace(/\b[A-Z]\./g,e=>e.replace(/\./g,"\xa7DOT\xa7"));const n=this.config.sentenceDelimiters.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),r=new RegExp(`([^${n}]+(?:[${n}]+|$))`,"g");return(t.match(r)||[]).map(e=>e.replace(/\xa7DOT\xa7/g,".").trim()).filter(e=>e.length>=this.config.minSentenceLength)}splitIntoParagraphs(e){return e.split(/\n\n+/).map(e=>e.trim()).filter(e=>e.length>0)}findOverlap(e,t){const n=this.normalize(e),r=this.normalize(t);let s={hasOverlap:!1,overlapStart:-1,overlapEnd:-1,overlapText:"",confidence:0};const o=n.split(/\s+/),i=r.split(/\s+/);for(let a=Math.min(o.length,i.length);a>=3;a--){const e=o.slice(-a).join(" "),t=i.slice(0,a).join(" ");if(this.calculateSimilarity(e,t)>this.config.similarityThreshold){const r=e,o=this.calculateSimilarity(e,t);o>s.confidence&&(s={hasOverlap:!0,overlapStart:n.lastIndexOf(e),overlapEnd:a,overlapText:r,confidence:o})}}return s}mergeWithOverlap(e,t,n){const r=this.normalize(e),s=this.normalize(t),o=r.lastIndexOf(n.overlapText);if(-1===o)return e+" "+t;const i=s.indexOf(n.overlapText);if(-1===i)return e+" "+t;const a=e.substring(0,o).trim(),c=i+n.overlapText.length,l=t.substring(c).trim();let u=a;return u&&n.overlapText&&(u+=" "),u+=n.overlapText,l&&(u+=" "+l),u.replace(/\s+/g," ").trim()}mergeBySentences(e,t){const n=this.splitIntoSentences(e),r=this.splitIntoSentences(t),s=[],o=new Set;for(const i of n){let e=!1,t={index:-1,similarity:0,sentence:""};for(let n=0;n<r.length;n++){if(o.has(n))continue;const s=this.calculateSimilarity(i,r[n]);s>this.config.similarityThreshold&&(s>t.similarity&&(t={index:n,similarity:s,sentence:r[n]}),e=!0)}if(e&&-1!==t.index){const e=i.length>=t.sentence.length?i:t.sentence;s.push(e),o.add(t.index)}else s.push(i)}for(let i=0;i<r.length;i++)if(!o.has(i)){const e=r[i];s.some(t=>t.includes(e)||this.calculateSimilarity(t,e)>.9)||s.push(e)}return this.reconstructText(s)}calculateSimilarity(e,t){if(!e||!t)return 0;if(e===t)return 1;const n=this.normalize(e),r=this.normalize(t);if(n===r)return 1;if(this.config.enableFuzzyMatching){const e=new Set(n.toLowerCase().split(/\s+/)),t=new Set(r.toLowerCase().split(/\s+/)),s=new Set([...e].filter(e=>t.has(e))),o=new Set([...e,...t]);if(0===o.size)return 0;const i=s.size/o.size;if(n.length<100&&r.length<100){return.7*i+.3*(1-this.levenshteinDistance(n,r)/Math.max(n.length,r.length))}return i}return n===r?1:0}levenshteinDistance(e,t){const n=e.length,r=t.length,s=Array(n+1).fill(null).map(()=>Array(r+1).fill(0));for(let o=0;o<=n;o++)s[o][0]=o;for(let o=0;o<=r;o++)s[0][o]=o;for(let o=1;o<=n;o++)for(let n=1;n<=r;n++)e[o-1]===t[n-1]?s[o][n]=s[o-1][n-1]:s[o][n]=Math.min(s[o-1][n]+1,s[o][n-1]+1,s[o-1][n-1]+1);return s[n][r]}normalize(e){if(!e)return"";let t=e;return this.config.preserveWhitespace||(t=t.replace(/\s+/g," "),t=t.trim()),t=t.replace(/['`\xb4'']/g,"'").replace(/["\xab\xbb""]/g,'"').replace(/\u2026/g,"...").replace(/\u2014/g,"-").replace(/\s*[-\u2013\u2014]\s*/g," - "),t}denormalizeToMatch(e,t){return e.trim()}reconstructText(e){if(0===e.length)return"";if(1===e.length)return e[0];return e.some(e=>e.includes("\n"))?e.join(" ").replace(/\s*\n\s*/g,"\n\n"):e.join(" ")}findCommonPrefixLength(e,t){let n=0;const r=Math.min(e.length,t.length);for(;n<r&&e[n]===t[n];)n++;return n}deduplicateSentences(e){const t=new Map,n=[];for(const r of e){const e=this.normalize(r);let s=!1;for(const[o,i]of t.entries()){if(this.calculateSimilarity(e,o)>this.config.similarityThreshold){if(s=!0,r.length>i.length){const s=n.indexOf(i);-1!==s&&(n[s]=r,t.set(e,r))}break}}s||(n.push(r),t.set(e,r))}return n}}t.ContentMerger=n,t.defaultContentMerger=new n},2510:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CursorPage=t.Page=void 0;const r=n(8757);class s extends r.AbstractPage{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}t.Page=s;class o extends r.AbstractPage{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){const e=this.getPaginatedItems();if(!e.length)return null;const t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}t.CursorPage=o},2530:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchesPage=t.Batches=void 0;const r=n(2802),s=n(8757),o=n(2510);class i extends r.APIResource{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return(0,s.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/batches",a,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}t.Batches=i;class a extends o.CursorPage{}t.BatchesPage=a,i.BatchesPage=a},2682:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Threads=void 0;const i=n(2802),a=n(8757),c=n(8868),l=o(n(6059)),u=n(6059),d=o(n(1946)),p=n(1946);class h extends i.APIResource{constructor(){super(...arguments),this.runs=new d.Runs(this._client),this.messages=new l.Messages(this._client)}create(e={},t){return(0,a.isRequestOptions)(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return c.AssistantStream.createThreadAssistantStream(e,this._client.beta.threads,t)}}t.Threads=h,h.Runs=p.Runs,h.RunsPage=p.RunsPage,h.Messages=u.Messages,h.MessagesPage=u.MessagesPage},2729:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptionSessions=void 0;const r=n(2802);class s extends r.APIResource{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}t.TranscriptionSessions=s},2745:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STORAGE_KEYS=t.StorageUtil=void 0;t.StorageUtil=class{static async get(e){return new Promise(t=>{chrome.storage.local.get([e],n=>{t(n[e]||null)})})}static async set(e,t){return new Promise(n=>{chrome.storage.local.set({[e]:t},()=>{n()})})}static async remove(e){return new Promise(t=>{chrome.storage.local.remove([e],()=>{t()})})}},t.STORAGE_KEYS={CACHED_CONTEXTS:"cached_contexts",USER_PREFERENCES:"user_preferences",RECENT_SEARCHES:"recent_searches",WIZE_TEAMS_DOCS:"wize_teams_docs",LABELING_TAGS:"labeling_tags"}},2761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.queue=[],this.isProcessing=!1,this.lastCapture=0,this.MIN_INTERVAL=600,this.MAX_RETRIES=3}log(e,...t){}captureScreenshot(){return new Promise((e,t)=>{this.queue.push({resolve:e,reject:t}),this.log(`Request queued (size=${this.queue.length}).`),this.isProcessing||(this.log("Starting processing loop."),this.process())})}async process(){if(!this.isProcessing&&0!==this.queue.length){for(this.isProcessing=!0,this.log("Processing queue...");this.queue.length>0;){const t=this.queue.shift();if(!t)continue;const n=Date.now(),r=Math.max(0,this.MIN_INTERVAL-(n-this.lastCapture));r>0&&this.log(`Throttling for ${r}ms`),r>0&&await new Promise(e=>setTimeout(e,r));try{this.log("Capturing screenshot...");const e=await this.performCapture();this.lastCapture=Date.now(),this.log("Screenshot captured successfully."),t.resolve(e)}catch(e){if(this.log("Capture error",e),e?.message?.includes("MAX_CAPTURE_VISIBLE_TAB_CALLS_PER_SECOND")){const n=(t.retryCount||0)+1;n<=this.MAX_RETRIES?(this.log(`Rate limit hit, retry ${n}/${this.MAX_RETRIES}`),t.retryCount=n,this.queue.unshift(t),await new Promise(e=>setTimeout(e,1500))):(this.log("Max retries reached, rejecting."),t.reject(new Error(`Screenshot failed after retries: ${e.message}`)))}else t.reject(e)}}this.isProcessing=!1,this.log("Queue empty, processing finished.")}}performCapture(){return new Promise((e,t)=>{chrome.tabs.query({active:!0,currentWindow:!0},n=>{n[0]?.id&&n[0]?.windowId?(this.log("Calling chrome.tabs.captureVisibleTab..."),chrome.tabs.captureVisibleTab(n[0].windowId,{format:"png"},n=>{chrome.runtime.lastError?t(chrome.runtime.lastError):e(n)})):t(new Error("No active tab found"))})})}}},2773:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages=t.Completions=t.ChatCompletionsPage=t.ChatCompletionStoreMessagesPage=void 0;var r=n(3054);Object.defineProperty(t,"ChatCompletionStoreMessagesPage",{enumerable:!0,get:function(){return r.ChatCompletionStoreMessagesPage}}),Object.defineProperty(t,"ChatCompletionsPage",{enumerable:!0,get:function(){return r.ChatCompletionsPage}}),Object.defineProperty(t,"Completions",{enumerable:!0,get:function(){return r.Completions}});var s=n(9501);Object.defineProperty(t,"Messages",{enumerable:!0,get:function(){return s.Messages}})},2802:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APIResource=void 0;t.APIResource=class{constructor(e){this._client=e}}},2917:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,a)}c((r=r.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,r,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.useBackend=t.BrowserBackend=void 0;var s=function(){function e(e){var t;void 0===e&&(e={}),this.debug=null!==(t=e.debug)&&void 0!==t&&t}return e.prototype.openLink=function(e){var t,n;null===(n=null===(t=null===window||void 0===window?void 0:window.chrome)||void 0===t?void 0:t.send)||void 0===n||n.call(t,"aiwize_applications.openLink",[e])},e.prototype.getPageContent=function(){return n(this,void 0,void 0,function(){return r(this,function(e){return this.debug?[2,Promise.resolve("<html><body><h1>Mock Page Content</h1></body></html>")]:[2,new Promise(function(e){var t,n,r;null!==(t=window.aiwize_applications)&&void 0!==t||(window.aiwize_applications={}),window.aiwize_applications.onPageContentReceived=function(t,n){e(n)},null===(r=null===(n=null===window||void 0===window?void 0:window.chrome)||void 0===n?void 0:n.send)||void 0===r||r.call(n,"aiwize_applications.getPageContent",[])})]})})},e.prototype.getPageInfo=function(){return n(this,void 0,void 0,function(){return r(this,function(e){return this.debug?[2,Promise.resolve(["https://example.com/mock-page","Mock Page Title"])]:[2,new Promise(function(e){var t,n,r;null!==(t=window.aiwize_applications)&&void 0!==t||(window.aiwize_applications={}),window.aiwize_applications.onPageInfoReceived=function(t,n){e([t,n])},null===(r=null===(n=null===window||void 0===window?void 0:window.chrome)||void 0===n?void 0:n.send)||void 0===r||r.call(n,"aiwize_applications.getPageInfo",[])})]})})},e.prototype.getPageScreenshots=function(){return n(this,void 0,void 0,function(){return r(this,function(e){return this.debug?[2,Promise.resolve(["iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO2Z6XkAAAAASUVORK5CYII="])]:[2,new Promise(function(e){var t,n,r;null!==(t=window.aiwize_applications)&&void 0!==t||(window.aiwize_applications={}),window.aiwize_applications.onPageScreenshotsReceived=function(t){e(t)},null===(r=null===(n=null===window||void 0===window?void 0:window.chrome)||void 0===n?void 0:n.send)||void 0===r||r.call(n,"aiwize_applications.getPageScreenshots",[])})]})})},e}();t.BrowserBackend=s;t.useBackend=function(e){return new s(e)}},2946:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommonBackgroundScript=void 0;const r=n(3543),s=n(4973),o=n(2270);t.CommonBackgroundScript=class{constructor(){this.contextClient=r.ContextClient.getInstance(),this.domainFilterClient=o.DomainFilterClient.getInstance(),this.setupMessageListener(),chrome.runtime.onInstalled.addListener(this.handleInstall.bind(this))}setupMessageListener(){chrome.runtime.onMessage.addListener(this.handleMessage.bind(this))}handleMessage(e,t,n){switch(e.type){case"ENRICH_FROM_POPUP":return this.handleEnrichFromPopup(e.input,e.tags,t).then(e=>{void 0!==t.tab?.id&&chrome.tabs.sendMessage(t.tab.id,{type:"ENRICH_RESULT",enrichResult:e})}).catch(e=>{void 0!==t.tab?.id&&chrome.tabs.sendMessage(t.tab.id,{type:"ENRICH_ERROR",error:String(e)}),n({success:!1,error:String(e)})}),!0;case"ENRICH":{const{entities:r}=(0,s.extractEntitiesAndReplace)(e.input,e.tags||[]);return this.handleEnrich(e.input,r).then(e=>{void 0!==t.tab?.id&&chrome.tabs.sendMessage(t.tab.id,{type:"ENRICH_RESULT",enrichResult:e})}).catch(e=>{void 0!==t.tab?.id&&chrome.tabs.sendMessage(t.tab.id,{type:"ENRICH_ERROR",error:String(e)}),n({success:!1,error:String(e)})}),!0}case"EXTRACT_TAGS":return this.handleExtractTags(e.input).then(e=>n({success:!0,tags:e})).catch(e=>n({success:!1,error:String(e)})),!0;case"ENRICH_TAG_POPUP":return this.handleEnrich(e.input,e.entities).then(e=>n({success:!0,...e})).catch(e=>n({success:!1,error:String(e)})),!0;case"SEARCH_CONTEXTS":return this.handleContextSearch(e.body).then(e=>n(e)).catch(()=>n([])),!0;case"DOMAIN_CHECK":return(async()=>{try{const t=await this.domainFilterClient.checkDomain(e.url);n({success:!0,data:t})}catch(t){n({success:!1,error:String(t)})}})(),!0;case"BLOCK_DOMAIN":return(async()=>{try{const t=await this.domainFilterClient.blockDomain({domain:e.domain,description:e.description||"Blocked from extension"});n({success:!0,response:t})}catch(t){n({success:!1,error:String(t)})}})(),!0;case"UPDATE_DOMAIN_STATUS":return(async()=>{try{const t=await this.domainFilterClient.updateDomainStatus(e.id,e.isBlocked);n({success:!0,response:t})}catch(t){n({success:!1,error:String(t)})}})(),!0;case"UPDATE_URL_STATUS":return(async()=>{try{const t=await this.domainFilterClient.updateUrlStatus(e.id,e.isBlocked);n({success:!0,response:t})}catch(t){n({success:!1,error:String(t)})}})(),!0;case"ADD_BLOCKED_URL":return(async()=>{try{const t=await this.domainFilterClient.addBlockedUrl(e.url,e.description);n({success:!0,response:t})}catch(t){n({success:!1,error:String(t)})}})(),!0;case"GENERATE":return(async()=>{try{const t=await this.handleGenerate(e.prompt);n({success:!0,generated:t})}catch(t){n({success:!1,error:String(t)})}})(),!0;case"PASTE_TEXT":return void 0!==t.tab?.id?chrome.tabs.sendMessage(t.tab.id,{type:"PASTE_TEXT_TO_INPUT",text:e.text},e=>{n(e?.success?{success:!0}:{success:!1,error:e?.error||"Failed"})}):n({success:!1,error:"No tab"}),!0;case"GET_SUGGESTIONS":return this.handleGetSuggestions(e,n),!0}return!1}async handleEnrichFromPopup(e,t,n){const{entities:r}=(0,s.extractEntitiesAndReplace)(e,t);return this.contextClient.enrichPrompt({prompt:e,entities:r})}async handleEnrich(e,t){return this.contextClient.enrichPrompt({prompt:e,entities:t})}async handleExtractTags(e){return this.contextClient.extractTags({prompt:e})}async handleContextSearch(e){try{return await this.contextClient.searchContext(e)}catch{return[]}}async handleGenerate(e){return this.contextClient.generate(e)}async handleInstall(){}async handleGetSuggestions(e,t){try{const{suggestionContext:n}=e,r={focusedInputEmpty:!0,pageContent:n?.pageContent||null,closestParentText:n?.closestParentText||"",useCase:"browser-social-network-reply"};if(!r.pageContent&&!r.closestParentText)return void t({success:!1,error:"No context provided for suggestions"});t({success:!0,suggestions:(await this.contextClient.getSuggestions(r)).suggestions||[]})}catch(n){t({success:!1,error:String(n)})}}}},2964:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AssistantsPage=t.Assistants=void 0;const r=n(2802),s=n(8757),o=n(2510);n(8868);class i extends r.APIResource{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},t){return(0,s.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/assistants",a,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}t.Assistants=i;class a extends o.CursorPage{}t.AssistantsPage=a,i.AssistantsPage=a},3017:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Uploads=void 0;const i=n(2802),a=o(n(3061)),c=n(3061);class l extends i.APIResource{constructor(){super(...arguments),this.parts=new a.Parts(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}t.Uploads=l,l.Parts=c.Parts},3054:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ChatCompletionStoreMessagesPage=t.ChatCompletionsPage=t.Completions=void 0;const i=n(2802),a=n(8757),c=o(n(9501)),l=n(9501),u=n(2510);class d extends i.APIResource{constructor(){super(...arguments),this.messages=new c.Messages(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return(0,a.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/chat/completions",p,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}}t.Completions=d;class p extends u.CursorPage{}t.ChatCompletionsPage=p;class h extends u.CursorPage{}t.ChatCompletionStoreMessagesPage=h,d.ChatCompletionsPage=p,d.Messages=l.Messages},3061:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Parts=void 0;const i=n(2802),a=o(n(8757));class c extends i.APIResource{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,a.multipartFormRequestOptions({body:t,...n}))}}t.Parts=c},3085:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setShims=t.isFsReadStream=t.fileFromPath=t.getDefaultAgent=t.getMultipartRequestOptions=t.ReadableStream=t.File=t.Blob=t.FormData=t.Headers=t.Response=t.Request=t.fetch=t.kind=t.auto=void 0,t.auto=!1,t.kind=void 0,t.fetch=void 0,t.Request=void 0,t.Response=void 0,t.Headers=void 0,t.FormData=void 0,t.Blob=void 0,t.File=void 0,t.ReadableStream=void 0,t.getMultipartRequestOptions=void 0,t.getDefaultAgent=void 0,t.fileFromPath=void 0,t.isFsReadStream=void 0,t.setShims=function(e,n={auto:!1}){if(t.auto)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(t.kind)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${t.kind}'\``);t.auto=n.auto,t.kind=e.kind,t.fetch=e.fetch,t.Request=e.Request,t.Response=e.Response,t.Headers=e.Headers,t.FormData=e.FormData,t.Blob=e.Blob,t.File=e.File,t.ReadableStream=e.ReadableStream,t.getMultipartRequestOptions=e.getMultipartRequestOptions,t.getDefaultAgent=e.getDefaultAgent,t.fileFromPath=e.fileFromPath,t.isFsReadStream=e.isFsReadStream}},3338:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorStoreFilesPage=t.FileBatches=void 0;const r=n(2802),s=n(8757),o=n(8757),i=n(3346),a=n(3766);Object.defineProperty(t,"VectorStoreFilesPage",{enumerable:!0,get:function(){return a.VectorStoreFilesPage}});class c extends r.APIResource{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n={},r){return(0,s.isRequestOptions)(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,a.VectorStoreFilesPage,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:s,response:i}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(s.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=i.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await(0,o.sleep)(e);break;case"failed":case"cancelled":case"completed":return s}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(null==t||0==t.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const s=r?.maxConcurrency??5,o=Math.min(s,t.length),a=this._client,c=t.values(),l=[...n];const u=Array(o).fill(c).map(async function(e){for(let t of e){const e=await a.files.create({file:t,purpose:"assistants"},r);l.push(e.id)}});return await(0,i.allSettledWithThrow)(u),await this.createAndPoll(e,{file_ids:l})}}t.FileBatches=c},3346:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allSettledWithThrow=void 0;t.allSettledWithThrow=async e=>{const t=await Promise.allSettled(e),n=t.filter(e=>"rejected"===e.status);if(n.length){for(const e of n);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const s of t)"fulfilled"===s.status&&r.push(s.value);return r}},3357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateInputTools=t.hasAutoParseableInput=t.shouldParseToolCall=t.parseChatCompletion=t.maybeParseChatCompletion=t.isAutoParsableTool=t.makeParseableTool=t.isAutoParsableResponseFormat=t.makeParseableTextFormat=t.makeParseableResponseFormat=void 0;const r=n(9526);function s(e){return"auto-parseable-response-format"===e?.$brand}function o(e){return"auto-parseable-tool"===e?.$brand}function i(e,t){const n=e.choices.map(e=>{if("length"===e.finish_reason)throw new r.LengthFinishReasonError;if("content_filter"===e.finish_reason)throw new r.ContentFilterFinishReasonError;return{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>function(e,t){const n=e.tools?.find(e=>e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:o(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?a(t,e.message.content):null}}});return{...e,choices:n}}function a(e,t){if("json_schema"!==e.response_format?.type)return null;if("json_schema"===e.response_format?.type){if("$parseRaw"in e.response_format){return e.response_format.$parseRaw(t)}return JSON.parse(t)}return null}function c(e){return!!s(e.response_format)||(e.tools?.some(e=>o(e)||"function"===e.type&&!0===e.function.strict)??!1)}t.makeParseableResponseFormat=function(e,t){const n={...e};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),n},t.makeParseableTextFormat=function(e,t){const n={...e};return Object.defineProperties(n,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),n},t.isAutoParsableResponseFormat=s,t.makeParseableTool=function(e,{parser:t,callback:n}){const r={...e};return Object.defineProperties(r,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:t,enumerable:!1},$callback:{value:n,enumerable:!1}}),r},t.isAutoParsableTool=o,t.maybeParseChatCompletion=function(e,t){return t&&c(t)?i(e,t):{...e,choices:e.choices.map(e=>({...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}},t.parseChatCompletion=i,t.shouldParseToolCall=function(e,t){if(!e)return!1;const n=e.tools?.find(e=>e.function?.name===t.function.name);return o(n)||n?.function.strict||!1},t.hasAutoParseableInput=c,t.validateInputTools=function(e){for(const t of e??[]){if("function"!==t.type)throw new r.OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new r.OpenAIError(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}},3453:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FineTuning=void 0;const i=n(2802),a=o(n(2241)),c=n(2241),l=o(n(4212)),u=n(4212),d=o(n(204)),p=n(204),h=o(n(1718)),f=n(1718);class m extends i.APIResource{constructor(){super(...arguments),this.methods=new a.Methods(this._client),this.jobs=new h.Jobs(this._client),this.checkpoints=new d.Checkpoints(this._client),this.alpha=new l.Alpha(this._client)}}t.FineTuning=m,m.Methods=c.Methods,m.Jobs=f.Jobs,m.FineTuningJobsPage=f.FineTuningJobsPage,m.FineTuningJobEventsPage=f.FineTuningJobEventsPage,m.Checkpoints=p.Checkpoints,m.Alpha=u.Alpha},3502:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CombinerWebSocketClient=void 0;var o=s(n(169)),i=function(){function e(){this.listeners=new Map}return e.prototype.on=function(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)},e.prototype.off=function(e,t){var n;null===(n=this.listeners.get(e))||void 0===n||n.delete(t)},e.prototype.emit=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];null===(t=this.listeners.get(e))||void 0===t||t.forEach(function(e){try{e.apply(void 0,n)}catch(t){}})},e}(),a=function(e){function t(t){var n,r,s,o,i,a=e.call(this)||this;return a.ws=null,a.reconnectAttempts=0,a.manualClose=!1,a.queue=[],a.opts={baseUrl:null!==(n=t.baseUrl)&&void 0!==n?n:a.getDefaultBaseUrl(),path:null!==(r=t.path)&&void 0!==r?r:"/ws",moduleId:t.moduleId,panel:null!==(s=t.panel)&&void 0!==s?s:"unknown",autoReconnect:!1!==t.autoReconnect,maxReconnectAttempts:void 0===t.maxReconnectAttempts?1/0:t.maxReconnectAttempts,reconnectBackoffMs:null!==(o=t.reconnectBackoffMs)&&void 0!==o?o:1e3,maxReconnectBackoffMs:null!==(i=t.maxReconnectBackoffMs)&&void 0!==i?i:3e4},a}return r(t,e),t.prototype.connect=function(){var e=this;if(this.ws&&(this.ws.readyState===o.default.OPEN||this.ws.readyState===o.default.CONNECTING))return Promise.resolve();var t=this.buildWsUrl();return this.manualClose=!1,new Promise(function(n,r){var s=new o.default(t);e.ws=s,s.addEventListener("open",function(){e.reconnectAttempts=0,e.flushQueue(),e.emit("open"),n()}),s.addEventListener("message",function(t){var n,r=null!==(n=t.data)&&void 0!==n?n:t;e.emit("message",r);try{var s=JSON.parse(r.toString());"connection_established"===(null===s||void 0===s?void 0:s.type)&&e.emit("connection_established",s),e.emit("json",s)}catch(o){}}),s.addEventListener("close",function(t){e.emit("close",t),e.ws=null,!e.manualClose&&e.opts.autoReconnect&&e.scheduleReconnect()}),s.addEventListener("error",function(t){e.emit("error",t)})})},t.prototype.send=function(e){this.ws&&this.ws.readyState===o.default.OPEN?this.ws.send(this.preparePayload(e)):this.queue.push(this.preparePayload(e))},t.prototype.disconnect=function(e,t){void 0===e&&(e=1e3),void 0===t&&(t=""),this.manualClose=!0,this.ws&&this.ws.readyState===o.default.OPEN&&this.ws.close(e,t)},Object.defineProperty(t.prototype,"readyState",{get:function(){var e,t;return null!==(t=null===(e=this.ws)||void 0===e?void 0:e.readyState)&&void 0!==t?t:null},enumerable:!1,configurable:!0}),t.prototype.preparePayload=function(e){if("string"===typeof e||e instanceof ArrayBuffer)return e;try{return JSON.stringify(e)}catch(t){return String(e)}},t.prototype.flushQueue=function(){var e=this;this.ws&&this.ws.readyState===o.default.OPEN&&(this.queue.forEach(function(t){return e.ws.send(t)}),this.queue=[])},t.prototype.scheduleReconnect=function(){var e=this;if(!(this.reconnectAttempts>=this.opts.maxReconnectAttempts)){this.reconnectAttempts+=1;var t=Math.min(this.opts.reconnectBackoffMs*Math.pow(2,this.reconnectAttempts-1),this.opts.maxReconnectBackoffMs);this.emit("reconnecting",this.reconnectAttempts,t),setTimeout(function(){e.connect().catch(function(){})},t)}},t.prototype.buildWsUrl=function(){var e=new URL(this.opts.baseUrl),t="https:"===e.protocol?"wss:":"ws:",n=new URL("".concat(t,"//").concat(e.host).concat(this.opts.path));return n.searchParams.set("moduleId",this.opts.moduleId),this.opts.panel&&n.searchParams.set("panel",this.opts.panel),n.toString()},t.prototype.getDefaultBaseUrl=function(){return"http://localhost:22003"},t}(i);t.CombinerWebSocketClient=a},3543:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextClient=void 0;const s=n(7024),o=r(n(6425)),i=r(n(2012));class a extends s.CombinerRestClient{constructor(){super({}),this.baseUrl=this.baseUrl||"http://localhost:22003"}async enrichPrompt(e){try{const{data:t}=await o.default.post(`${this.baseUrl}/enrich/entities`,e);return t}catch(t){if(o.default.isAxiosError(t)){const e=t.response?.data?.message||t.response?.data?.error||t.message;throw new Error(e)}throw t}}async extractTags(e){try{const{data:t}=await o.default.post(`${this.baseUrl}/enrich/extract`,e);if(!t||!Array.isArray(t)||0===t.length)throw new Error(`There are no tags extracted for ${e.prompt}`);return t}catch(t){if(o.default.isAxiosError(t)){const e=t.response?.data?.message||t.response?.data?.error||t.message;throw new Error(e)}throw t}}async getLabelingTags(){const{data:e}=await o.default.get(`${this.baseUrl}/api/labeling/tags`);return e}async getSelector(e){try{const t=encodeURIComponent(e),{data:n}=await o.default.get(`${this.baseUrl}/api/labeling/selector?url=${t}`);return n}catch(t){return o.default.isAxiosError(t)&&t.response,null}}async processLabeling(e){try{const{data:t}=await o.default.post(`${this.baseUrl}/api/labeling/process`,e);return t}catch(t){if(o.default.isAxiosError(t)){const e=t.response?.data?.message||t.response?.data?.error||t.message;throw new Error(e)}throw t}}async getLlmToken(){let e=await this.apiKey();return e||(e=await this.getDefaultApiKey()),e}async getExternalLlmBaseUrl(){const{data:e}=await o.default.get(`${this.baseUrl}/api/llm-base-url?type=external`,{timeout:6e4});if(!e)throw new Error("Failed to fetch LLM base URL");return e}async getSuggestions(e){try{const t={pageContent:{url:e.pageContent.url||"",title:e.pageContent.title,content:e.pageContent.content,description:e.pageContent.meta?.description},useCase:"browser-social-network-reply",closestParentText:e.closestParentText||"",focusedInputEmpty:e.focusedInputEmpty},{data:n}=await o.default.post(`${this.baseUrl}/api/suggestions`,t);return{suggestions:n.suggestions.map((e,t)=>({id:`suggestion-${Date.now()}-${t}`,label:e.slice(0,50)+(e.length>50?"...":""),preview:e.slice(0,100)+(e.length>100?"...":""),text:e,confidence:.8,meta:{processingTime:n.metadata?.processingTime,hasSemanticProfile:n.metadata?.hasSemanticProfile,useCase:n.metadata?.useCase}}))}}catch(t){if(o.default.isAxiosError(t)){const e=t.response?.data?.error||t.response?.data?.message||t.message;throw new Error(`Failed to get suggestions: ${e}`)}throw t}}async generate(e){try{const t=6e4,n=6e4;let r=await this.apiKey();r||(r=await this.getDefaultApiKey());const{data:s}=await o.default.get(`${this.baseUrl}/api/llm-base-url?type=external`,{timeout:t});if(!s)throw new Error("Failed to fetch LLM base URL");const a=new i.default({apiKey:r,baseURL:s,dangerouslyAllowBrowser:!0}),c=await a.chat.completions.create({model:"openai/gpt-oss-120b",messages:[{role:"user",content:e}]},{timeout:n}),l=c?.choices?.[0]?.message?.content?.trim();if(!l)throw new Error("OpenAI returned no content");return l}catch(t){throw t}}async apiKey(){try{return await this.getAiwizeSessionToken()}catch(e){return""}}async getDefaultApiKey(){const{data:e}=await o.default.get(`${this.baseUrl}/get-default-token`,{timeout:3e4});return e.token}static getInstance(){return a.instance||(a.instance=new a),a.instance}}t.ContextClient=a},3690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MalformedJSON=t.PartialJSON=t.partialParse=void 0;const n=1,r=2,s=4,o=8,i=16,a=32,c=64,l=128,u=256,d=511;class p extends Error{}t.PartialJSON=p;class h extends Error{}t.MalformedJSON=h;const f=(e,t)=>{const d=e.length;let f=0;const m=e=>{throw new p(`${e} at position ${f}`)},g=e=>{throw new h(`${e} at position ${f}`)},y=()=>(P(),f>=d&&m("Unexpected end of input"),'"'===e[f]?b():"{"===e[f]?w():"["===e[f]?v():"null"===e.substring(f,f+4)||i&t&&d-f<4&&"null".startsWith(e.substring(f))?(f+=4,null):"true"===e.substring(f,f+4)||a&t&&d-f<4&&"true".startsWith(e.substring(f))?(f+=4,!0):"false"===e.substring(f,f+5)||a&t&&d-f<5&&"false".startsWith(e.substring(f))?(f+=5,!1):"Infinity"===e.substring(f,f+8)||l&t&&d-f<8&&"Infinity".startsWith(e.substring(f))?(f+=8,1/0):"-Infinity"===e.substring(f,f+9)||u&t&&1<d-f&&d-f<9&&"-Infinity".startsWith(e.substring(f))?(f+=9,-1/0):"NaN"===e.substring(f,f+3)||c&t&&d-f<3&&"NaN".startsWith(e.substring(f))?(f+=3,NaN):_()),b=()=>{const r=f;let s=!1;for(f++;f<d&&('"'!==e[f]||s&&"\\"===e[f-1]);)s="\\"===e[f]&&!s,f++;if('"'==e.charAt(f))try{return JSON.parse(e.substring(r,++f-Number(s)))}catch(o){g(String(o))}else if(n&t)try{return JSON.parse(e.substring(r,f-Number(s))+'"')}catch(o){return JSON.parse(e.substring(r,e.lastIndexOf("\\"))+'"')}m("Unterminated string literal")},w=()=>{f++,P();const n={};try{for(;"}"!==e[f];){if(P(),f>=d&&o&t)return n;const s=b();P(),f++;try{const e=y();Object.defineProperty(n,s,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(r){if(o&t)return n;throw r}P(),","===e[f]&&f++}}catch(r){if(o&t)return n;m("Expected '}' at end of object")}return f++,n},v=()=>{f++;const n=[];try{for(;"]"!==e[f];)n.push(y()),P(),","===e[f]&&f++}catch(r){if(s&t)return n;m("Expected ']' at end of array")}return f++,n},_=()=>{if(0===f){"-"===e&&r&t&&m("Not sure what '-' is");try{return JSON.parse(e)}catch(s){if(r&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(s){}g(String(s))}}const n=f;for("-"===e[f]&&f++;e[f]&&!",]}".includes(e[f]);)f++;f!=d||r&t||m("Unterminated number literal");try{return JSON.parse(e.substring(n,f))}catch(s){"-"===e.substring(n,f)&&r&t&&m("Not sure what '-' is");try{return JSON.parse(e.substring(n,e.lastIndexOf("e")))}catch(s){g(String(s))}}},P=()=>{for(;f<d&&" \n\r\t".includes(e[f]);)f++};return y()};t.partialParse=e=>function(e,t=d){if("string"!==typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return f(e.trim(),t)}(e,d^r)},3694:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Transcriptions=void 0;const i=n(2802),a=o(n(8757));class c extends i.APIResource{create(e,t){return this._client.post("/audio/transcriptions",a.multipartFormRequestOptions({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}t.Transcriptions=c},3706:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Realtime=void 0;const i=n(2802),a=o(n(3850)),c=n(3850),l=o(n(2729)),u=n(2729);class d extends i.APIResource{constructor(){super(...arguments),this.sessions=new a.Sessions(this._client),this.transcriptionSessions=new l.TranscriptionSessions(this._client)}}t.Realtime=d,d.Sessions=c.Sessions,d.TranscriptionSessions=u.TranscriptionSessions},3766:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileContentResponsesPage=t.VectorStoreFilesPage=t.Files=void 0;const r=n(2802),s=n(8757),o=n(2510);class i extends r.APIResource{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return(0,s.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,a,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...n?.headers,"X-Stainless-Poll-Helper":"true"};for(n?.pollIntervalMs&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const o=await this.retrieve(e,t,{...n,headers:r}).withResponse(),i=o.data;switch(i.status){case"in_progress":let e=5e3;if(n?.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.response.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await(0,s.sleep)(e);break;case"failed":case"completed":return i}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}content(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,c,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}t.Files=i;class a extends o.CursorPage{}t.VectorStoreFilesPage=a;class c extends o.Page{}t.FileContentResponsesPage=c,i.VectorStoreFilesPage=a,i.FileContentResponsesPage=c},3822:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formats=t.stringify=void 0;const r=n(5257),s={formatters:r.formatters,RFC1738:r.RFC1738,RFC3986:r.RFC3986,default:r.default_format};t.formats=s;var o=n(168);Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}})},3850:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sessions=void 0;const r=n(2802);class s extends r.APIResource{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}}t.Sessions=s},3946:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.VectorStores=t.VectorStoreSearchResponsesPage=t.VectorStoresPage=t.Uploads=t.Responses=t.Moderations=t.Models=t.ModelsPage=t.Images=t.Graders=t.FineTuning=t.Files=t.FileObjectsPage=t.Evals=t.EvalListResponsesPage=t.Embeddings=t.Containers=t.ContainerListResponsesPage=t.Completions=t.Beta=t.Batches=t.BatchesPage=t.Audio=void 0,s(n(7949),t),s(n(5653),t);var o=n(1253);Object.defineProperty(t,"Audio",{enumerable:!0,get:function(){return o.Audio}});var i=n(2530);Object.defineProperty(t,"BatchesPage",{enumerable:!0,get:function(){return i.BatchesPage}}),Object.defineProperty(t,"Batches",{enumerable:!0,get:function(){return i.Batches}});var a=n(6183);Object.defineProperty(t,"Beta",{enumerable:!0,get:function(){return a.Beta}});var c=n(9045);Object.defineProperty(t,"Completions",{enumerable:!0,get:function(){return c.Completions}});var l=n(2099);Object.defineProperty(t,"ContainerListResponsesPage",{enumerable:!0,get:function(){return l.ContainerListResponsesPage}}),Object.defineProperty(t,"Containers",{enumerable:!0,get:function(){return l.Containers}});var u=n(1242);Object.defineProperty(t,"Embeddings",{enumerable:!0,get:function(){return u.Embeddings}});var d=n(4769);Object.defineProperty(t,"EvalListResponsesPage",{enumerable:!0,get:function(){return d.EvalListResponsesPage}}),Object.defineProperty(t,"Evals",{enumerable:!0,get:function(){return d.Evals}});var p=n(1461);Object.defineProperty(t,"FileObjectsPage",{enumerable:!0,get:function(){return p.FileObjectsPage}}),Object.defineProperty(t,"Files",{enumerable:!0,get:function(){return p.Files}});var h=n(3453);Object.defineProperty(t,"FineTuning",{enumerable:!0,get:function(){return h.FineTuning}});var f=n(9777);Object.defineProperty(t,"Graders",{enumerable:!0,get:function(){return f.Graders}});var m=n(7370);Object.defineProperty(t,"Images",{enumerable:!0,get:function(){return m.Images}});var g=n(9458);Object.defineProperty(t,"ModelsPage",{enumerable:!0,get:function(){return g.ModelsPage}}),Object.defineProperty(t,"Models",{enumerable:!0,get:function(){return g.Models}});var y=n(4975);Object.defineProperty(t,"Moderations",{enumerable:!0,get:function(){return y.Moderations}});var b=n(477);Object.defineProperty(t,"Responses",{enumerable:!0,get:function(){return b.Responses}});var w=n(3017);Object.defineProperty(t,"Uploads",{enumerable:!0,get:function(){return w.Uploads}});var v=n(4229);Object.defineProperty(t,"VectorStoresPage",{enumerable:!0,get:function(){return v.VectorStoresPage}}),Object.defineProperty(t,"VectorStoreSearchResponsesPage",{enumerable:!0,get:function(){return v.VectorStoreSearchResponsesPage}}),Object.defineProperty(t,"VectorStores",{enumerable:!0,get:function(){return v.VectorStores}})},3955:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FineTuningJobCheckpointsPage=t.Checkpoints=void 0;const r=n(2802),s=n(8757),o=n(2510);class i extends r.APIResource{list(e,t={},n){return(0,s.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,a,{query:t,...n})}}t.Checkpoints=i;class a extends o.CursorPage{}t.FineTuningJobCheckpointsPage=a,i.FineTuningJobCheckpointsPage=a},4021:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(s,o){function i(e){try{c(r.next(e))}catch(t){o(t)}}function a(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,a)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(o=0)),o;)try{if(n=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(c){a=[6,c],r=0}finally{n=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,s=0,o=t.length;s<o;s++)!r&&s in t||(r||(r=Array.prototype.slice.call(t,0,s)),r[s]=t[s]);return e.concat(r||Array.prototype.slice.call(t))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CombinerRestClient=void 0;var c=a(n(4945)),l=n(4654);var u=function(){function e(e){var t,n,r,s;this.opts={baseUrl:null!==(t=e.baseUrl)&&void 0!==t?t:this.getDefaultBaseUrl(),moduleId:null!==(n=e.moduleId)&&void 0!==n?n:"",defaultHeaders:null!==(r=e.defaultHeaders)&&void 0!==r?r:{},testMode:null!==(s=e.testMode)&&void 0!==s&&s},this._fetch="undefined"!==typeof globalThis&&"function"===typeof globalThis.fetch?globalThis.fetch.bind(globalThis):c.default}return e.prototype.getAiwizeSessionToken=function(){return s(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return e=new URL("/get-token",this.opts.baseUrl),[4,this.getJson(e)];case 1:return[2,t.sent().token]}})})},e.prototype.listDir=function(){return s(this,arguments,void 0,function(e){var t;return void 0===e&&(e="."),o(this,function(n){return(t=new URL("/api/fs/list",this.opts.baseUrl)).searchParams.set("path",e),[2,this.getJson(t)]})})},e.prototype.readFile=function(e){return s(this,arguments,void 0,function(e,t){var n;return void 0===t&&(t="utf-8"),o(this,function(r){return n=new URL("/api/fs/read",this.opts.baseUrl),[2,this.postJson(n,{path:e,encoding:t})]})})},e.prototype.writeFile=function(e,t){return s(this,arguments,void 0,function(e,t,n){var r;return void 0===n&&(n="utf-8"),o(this,function(s){return r=new URL("/api/fs/write",this.opts.baseUrl),[2,this.postJson(r,{path:e,content:t,encoding:n})]})})},e.prototype.dbCreate=function(e,t){return s(this,void 0,void 0,function(){var n;return o(this,function(r){return n=new URL("/api/db/".concat(encodeURIComponent(this.opts.moduleId),"/").concat(encodeURIComponent(e)),this.opts.baseUrl),[2,this.postJson(n,t)]})})},e.prototype.dbList=function(e,t){return s(this,void 0,void 0,function(){var n;return o(this,function(r){return n=new URL("/api/db/".concat(encodeURIComponent(this.opts.moduleId),"/").concat(encodeURIComponent(e)),this.opts.baseUrl),t&&Object.keys(t).length>0&&n.searchParams.set("filter",JSON.stringify(t)),[2,this.getJson(n)]})})},e.prototype.dbRead=function(e,t){return s(this,void 0,void 0,function(){var n;return o(this,function(r){return n=new URL("/api/db/".concat(encodeURIComponent(this.opts.moduleId),"/").concat(encodeURIComponent(e),"/").concat(encodeURIComponent(t)),this.opts.baseUrl),[2,this.getJson(n)]})})},e.prototype.dbUpdate=function(e,t,n){return s(this,void 0,void 0,function(){var r;return o(this,function(s){return r=new URL("/api/db/".concat(encodeURIComponent(this.opts.moduleId),"/").concat(encodeURIComponent(e),"/").concat(encodeURIComponent(t)),this.opts.baseUrl),[2,this.putJson(r,n)]})})},e.prototype.dbDelete=function(e,t){return s(this,void 0,void 0,function(){var n;return o(this,function(r){return n=new URL("/api/db/".concat(encodeURIComponent(this.opts.moduleId),"/").concat(encodeURIComponent(e),"/").concat(encodeURIComponent(t)),this.opts.baseUrl),[2,this.delete(n)]})})},e.prototype.searchContext=function(e){return s(this,void 0,void 0,function(){var t,n,r;return o(this,function(s){switch(s.label){case 0:return this.opts.testMode?[4,new Promise(function(e){return setTimeout(e,300)})]:[3,2];case 1:return s.sent(),t=i([],l.MOCK_CONTEXT,!0),(null===e||void 0===e?void 0:e.query)&&(n=e.query.toLowerCase(),t=t.filter(function(e){var t,r,s;return null!==(r=null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(n))&&void 0!==r&&r||e.content.toLowerCase().includes(n)||(null===(s=e.tags)||void 0===s?void 0:s.some(function(e){return e.toLowerCase().includes(n)}))})),(null===e||void 0===e?void 0:e.categories)&&e.categories.length>0&&(t=t.filter(function(t){return e.categories.some(function(e){var n;return(null===(n=t.category)||void 0===n?void 0:n.toLowerCase())===e.toLowerCase()})})),(null===e||void 0===e?void 0:e.tags)&&e.tags.length>0&&(t=t.filter(function(t){var n;return null===(n=t.tags)||void 0===n?void 0:n.some(function(t){var n;return null===(n=e.tags)||void 0===n?void 0:n.some(function(e){return t.toLowerCase()===e.toLowerCase()})})})),(null===e||void 0===e?void 0:e.limit)&&e.limit>0&&(t=t.slice(0,e.limit)),[2,{success:!0,data:t.map(function(e){return{content:e.content,summary_content:e.content.length>100?e.content.slice(0,100)+"...":e.content,url:"https://mock.local/context/".concat(e.id)}})}];case 2:return r=new URL("/api/labeling/search",this.opts.baseUrl),[2,this.postJson(r,e)]}})})},e.prototype.processLabeling=function(e){return s(this,void 0,void 0,function(){var t;return o(this,function(n){return t=new URL("/api/labeling/process",this.opts.baseUrl),[2,this.postJson(t,e)]})})},e.prototype.buildHeaders=function(e){return r(r({"Content-Type":"application/json","X-Module-Id":this.opts.moduleId},this.opts.defaultHeaders),e)},e.prototype.getJson=function(e){return s(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,this._fetch(e.toString(),{headers:this.buildHeaders(),credentials:"include"})];case 1:return t=n.sent(),[2,this.handleResponse(t)]}})})},e.prototype.postJson=function(e,t){return s(this,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return[4,this._fetch(e.toString(),{method:"POST",headers:this.buildHeaders(),credentials:"include",body:JSON.stringify(null!==t&&void 0!==t?t:{})})];case 1:return n=r.sent(),[2,this.handleResponse(n)]}})})},e.prototype.putJson=function(e,t){return s(this,void 0,void 0,function(){var n;return o(this,function(r){switch(r.label){case 0:return[4,this._fetch(e.toString(),{method:"PUT",headers:this.buildHeaders(),credentials:"include",body:JSON.stringify(null!==t&&void 0!==t?t:{})})];case 1:return n=r.sent(),[2,this.handleResponse(n)]}})})},e.prototype.delete=function(e){return s(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,this._fetch(e.toString(),{method:"DELETE",headers:this.buildHeaders(),credentials:"include"})];case 1:return t=n.sent(),[2,this.handleResponse(t)]}})})},e.prototype.handleResponse=function(e){return s(this,void 0,void 0,function(){var t,n,r;return o(this,function(s){switch(s.label){case 0:return e.ok?[3,2]:[4,e.text()];case 1:t=s.sent(),n=void 0;try{n=JSON.parse(t)}catch(o){}throw(r=new Error("HTTP ".concat(e.status,": ").concat(e.statusText))).status=e.status,r.payload=null!==n&&void 0!==n?n:t,r;case 2:return(e.headers.get("content-type")||"").includes("application/json")?[2,e.json()]:[2,e.text()]}})})},e.prototype.getDefaultBaseUrl=function(){return"http://localhost:22003"},e}();t.CombinerRestClient=u},4042:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createForm=t.multipartFormRequestOptions=t.maybeMultipartFormRequestOptions=t.isMultipartBody=t.toFile=t.isUploadable=t.isBlobLike=t.isFileLike=t.isResponseLike=t.fileFromPath=void 0;const r=n(2212);var s=n(2212);Object.defineProperty(t,"fileFromPath",{enumerable:!0,get:function(){return s.fileFromPath}});t.isResponseLike=e=>null!=e&&"object"===typeof e&&"string"===typeof e.url&&"function"===typeof e.blob;t.isFileLike=e=>null!=e&&"object"===typeof e&&"string"===typeof e.name&&"number"===typeof e.lastModified&&(0,t.isBlobLike)(e);t.isBlobLike=e=>null!=e&&"object"===typeof e&&"number"===typeof e.size&&"string"===typeof e.type&&"function"===typeof e.text&&"function"===typeof e.slice&&"function"===typeof e.arrayBuffer;async function o(e,n,s){if(e=await e,(0,t.isFileLike)(e))return e;if((0,t.isResponseLike)(e)){const o=await e.blob();n||(n=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const i=(0,t.isBlobLike)(o)?[await o.arrayBuffer()]:[o];return new r.File(i,n,s)}const o=await async function(e){let n=[];if("string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)n.push(e);else if((0,t.isBlobLike)(e))n.push(await e.arrayBuffer());else{if(!a(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){const t=Object.getOwnPropertyNames(e);return`[${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`);for await(const t of e)n.push(t)}return n}(e);if(n||(n=function(e){return i(e.name)||i(e.filename)||i(e.path)?.split(/[\\/]/).pop()}(e)??"unknown_file"),!s?.type){const e=o[0]?.type;"string"===typeof e&&(s={...s,type:e})}return new r.File(o,n,s)}t.isUploadable=e=>(0,t.isFileLike)(e)||(0,t.isResponseLike)(e)||(0,r.isFsReadStream)(e),t.toFile=o;const i=e=>"string"===typeof e?e:"undefined"!==typeof Buffer&&e instanceof Buffer?String(e):void 0,a=e=>null!=e&&"object"===typeof e&&"function"===typeof e[Symbol.asyncIterator];t.isMultipartBody=e=>e&&"object"===typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag];t.maybeMultipartFormRequestOptions=async e=>{if(!c(e.body))return e;const n=await(0,t.createForm)(e.body);return(0,r.getMultipartRequestOptions)(n,e)};t.multipartFormRequestOptions=async e=>{const n=await(0,t.createForm)(e.body);return(0,r.getMultipartRequestOptions)(n,e)};t.createForm=async e=>{const t=new r.FormData;return await Promise.all(Object.entries(e||{}).map(([e,n])=>l(t,e,n))),t};const c=e=>{if((0,t.isUploadable)(e))return!0;if(Array.isArray(e))return e.some(c);if(e&&"object"===typeof e)for(const t in e)if(c(e[t]))return!0;return!1},l=async(e,n,r)=>{if(void 0!==r){if(null==r)throw new TypeError(`Received null for "${n}"; to pass null in FormData, you must use the string 'null'`);if("string"===typeof r||"number"===typeof r||"boolean"===typeof r)e.append(n,String(r));else if((0,t.isUploadable)(r)){const t=await o(r);e.append(n,t)}else if(Array.isArray(r))await Promise.all(r.map(t=>l(e,n+"[]",t)));else{if("object"!==typeof r)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`);await Promise.all(Object.entries(r).map(([t,r])=>l(e,`${n}[${t}]`,r)))}}}},4212:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Alpha=void 0;const i=n(2802),a=o(n(2268)),c=n(2268);class l extends i.APIResource{constructor(){super(...arguments),this.graders=new a.Graders(this._client)}}t.Alpha=l,l.Graders=c.Graders},4229:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.VectorStoreSearchResponsesPage=t.VectorStoresPage=t.VectorStores=void 0;const i=n(2802),a=n(8757),c=o(n(3338)),l=n(3338),u=o(n(3766)),d=n(3766),p=n(2510);class h extends i.APIResource{constructor(){super(...arguments),this.files=new u.Files(this._client),this.fileBatches=new c.FileBatches(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}list(e={},t){return(0,a.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/vector_stores",f,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t?.headers}})}search(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/search`,m,{body:t,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}t.VectorStores=h;class f extends p.CursorPage{}t.VectorStoresPage=f;class m extends p.Page{}t.VectorStoreSearchResponsesPage=m,h.VectorStoresPage=f,h.VectorStoreSearchResponsesPage=m,h.Files=d.Files,h.VectorStoreFilesPage=d.VectorStoreFilesPage,h.FileContentResponsesPage=d.FileContentResponsesPage,h.FileBatches=l.FileBatches},4356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultipartBody=void 0;class n{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}t.MultipartBody=n},4648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatCompletionRunner=void 0;const r=n(1118),s=n(6289);class o extends r.AbstractChatCompletionRunner{static runFunctions(e,t,n){const r=new o,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,s)),r}static runTools(e,t,n){const r=new o,s={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,s)),r}_addMessage(e,t=!0){super._addMessage(e,t),(0,s.isAssistantMessage)(e)&&e.content&&this._emit("content",e.content)}}t.ChatCompletionRunner=o},4654:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MOCK_CONTEXT=void 0,t.MOCK_CONTEXT=[{id:"1",name:"Getting Started with React",content:'# Getting Started with React\n\nReact is a JavaScript library for building user interfaces. It allows developers to create reusable UI components and manage application state efficiently.\n\n## Key Concepts\n\n\u2022 **Components**: Building blocks of React applications\n\u2022 **JSX**: JavaScript syntax extension for writing HTML-like code\n\u2022 **State**: Data that changes over time in your component\n\u2022 **Props**: Data passed from parent to child components\n\n## Basic Example\n\n```jsx\nfunction Welcome(props) {\n  return <h1>Hello, {props.name}!</h1>;\n}\n\nfunction App() {\n  return <Welcome name="World" />;\n}\n```\n\n## Getting Started\n\n1. Create a new React app: `npx create-react-app my-app`\n2. Navigate to directory: `cd my-app`\n3. Start development server: `npm start`',category:"tutorial",tags:["react","javascript","frontend","ui"],updatedAt:"2024-01-15T10:30:00.000Z"},{id:"2",name:"Node.js Best Practices",content:"# Node.js Best Practices\n\nNode.js is a runtime environment that allows you to run JavaScript on the server side. Here are some best practices for building scalable Node.js applications.\n\n## Performance Best Practices\n\n### 1. Use Asynchronous Programming\n- Prefer `async/await` over callbacks\n- Use Promises for better error handling\n- Avoid blocking the event loop\n\n### 2. Error Handling\n```javascript\n// Good: Proper error handling\ntry {\n  const result = await someAsyncOperation();\n  return result;\n} catch (error) {\n  logger.error('Operation failed:', error);\n  throw error;\n}\n```\n\n### 3. Environment Configuration\n- Use environment variables for configuration\n- Never commit sensitive data to version control\n- Use `.env` files for local development\n\n### 4. Security\n- Keep dependencies updated\n- Use helmet.js for basic security headers\n- Implement rate limiting\n- Validate and sanitize user input\n\n### 5. Monitoring and Logging\n- Implement structured logging\n- Monitor application performance\n- Set up health check endpoints",category:"guide",tags:["nodejs","javascript","backend","server"],updatedAt:"2024-01-20T14:15:00.000Z"},{id:"3",name:"Database Design Principles",content:"# Database Design Principles\n\nGood database design is crucial for application performance. This document covers normalization, indexing, and query optimization techniques.\n\n## Core Principles\n\n### 1. Normalization\n- **1NF**: Eliminate repeating groups\n- **2NF**: Eliminate redundant data\n- **3NF**: Eliminate columns not dependent on primary key\n\n### 2. Indexing Strategy\n```sql\n-- Create indexes on frequently queried columns\nCREATE INDEX idx_user_email ON users(email);\nCREATE INDEX idx_order_date ON orders(created_at);\n\n-- Composite indexes for multi-column queries\nCREATE INDEX idx_user_status_date ON users(status, created_at);\n```\n\n### 3. Query Optimization\n- Use EXPLAIN to analyze query execution plans\n- Avoid SELECT * in production queries\n- Use appropriate JOIN types\n- Consider query caching strategies\n\n### 4. Data Types\n- Choose appropriate data types for storage efficiency\n- Use fixed-length types when possible\n- Consider timezone handling for datetime fields\n\n### 5. Constraints and Relationships\n- Define foreign key constraints\n- Use check constraints for data validation\n- Implement proper cascade rules",category:"reference",tags:["database","sql","design","performance"],updatedAt:"2024-01-18T09:45:00.000Z"},{id:"4",name:"TypeScript Migration Guide",content:'# TypeScript Migration Guide\n\nMigrating from JavaScript to TypeScript can improve code quality and developer experience. This guide covers the step-by-step process.\n\n## Migration Strategy\n\n### Phase 1: Setup\n1. Install TypeScript and types\n```bash\nnpm install -D typescript @types/node\nnpx tsc --init\n```\n\n2. Configure `tsconfig.json`\n```json\n{\n  "compilerOptions": {\n    "target": "ES2020",\n    "module": "commonjs",\n    "strict": true,\n    "esModuleInterop": true\n  }\n}\n```\n\n### Phase 2: Gradual Migration\n- Rename `.js` files to `.ts` incrementally\n- Start with utility functions and models\n- Add type annotations gradually\n\n### Phase 3: Type Definitions\n```typescript\n// Define interfaces for data structures\ninterface User {\n  id: string;\n  name: string;\n  email: string;\n  createdAt: Date;\n}\n\n// Use generic types for reusability\ninterface ApiResponse<T> {\n  data: T;\n  success: boolean;\n  message?: string;\n}\n```\n\n### Best Practices\n- Enable strict mode from the beginning\n- Use union types instead of `any`\n- Leverage type guards for runtime checks\n- Document complex types with comments',category:"tutorial",tags:["typescript","javascript","migration","types"],updatedAt:"2024-01-22T16:20:00.000Z"},{id:"5",name:"API Documentation Standards",content:"# API Documentation Standards\n\nWell-documented APIs are essential for team collaboration. This document outlines standards for REST API documentation using OpenAPI specifications.\n\n## OpenAPI Structure\n\n### Basic Information\n```yaml\nopenapi: 3.0.0\ninfo:\n  title: User Management API\n  version: 1.0.0\n  description: API for managing user accounts and profiles\nservers:\n  - url: https://api.example.com/v1\n```\n\n### Path Documentation\n```yaml\npaths:\n  /users:\n    get:\n      summary: List all users\n      parameters:\n        - name: page\n          in: query\n          schema:\n            type: integer\n            default: 1\n      responses:\n        '200':\n          description: List of users\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/User'\n```\n\n## Documentation Standards\n\n### 1. Consistent Naming\n- Use kebab-case for endpoints\n- Use camelCase for JSON properties\n- Be descriptive but concise\n\n### 2. Error Responses\n- Document all possible error codes\n- Provide example error responses\n- Include error message formats\n\n### 3. Examples\n- Provide request/response examples\n- Include edge cases\n- Show authentication examples",category:"standard",tags:["api","documentation","rest","openapi"],updatedAt:"2024-01-17T11:00:00.000Z"},{id:"6",name:"Docker Container Best Practices",content:"# Docker Container Best Practices\n\nDocker containers provide consistent deployment environments. Learn how to optimize Docker images and manage container lifecycles effectively.\n\n## Dockerfile Optimization\n\n### Multi-stage Builds\n```dockerfile\n# Build stage\nFROM node:16-alpine AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci --only=production\n\n# Production stage\nFROM node:16-alpine AS production\nWORKDIR /app\nCOPY --from=builder /app/node_modules ./node_modules\nCOPY . .\nEXPOSE 3000\nCMD [\"node\", \"server.js\"]\n```\n\n### Image Size Optimization\n- Use Alpine Linux base images\n- Remove unnecessary packages after installation\n- Use .dockerignore to exclude files\n- Combine RUN commands to reduce layers\n\n### Security Best Practices\n- Don't run containers as root\n- Use specific version tags, avoid 'latest'\n- Scan images for vulnerabilities\n- Keep base images updated\n\n## Container Management\n\n### Health Checks\n```dockerfile\nHEALTHCHECK --interval=30s --timeout=3s --retries=3 \\\n  CMD curl -f http://localhost:3000/health || exit 1\n```\n\n### Resource Limits\n```yaml\n# docker-compose.yml\nservices:\n  app:\n    image: myapp:latest\n    deploy:\n      resources:\n        limits:\n          memory: 512M\n          cpus: '0.5'\n```",category:"guide",tags:["docker","containers","deployment","devops"],updatedAt:"2024-01-25T13:30:00.000Z"},{id:"7",name:"CSS Grid Layout Fundamentals",content:'# CSS Grid Layout Fundamentals\n\nCSS Grid is a powerful layout system for web pages. This document explains the fundamentals of grid containers, grid items, and responsive design.\n\n## Grid Container Setup\n\n### Basic Grid\n```css\n.grid-container {\n  display: grid;\n  grid-template-columns: 1fr 2fr 1fr;\n  grid-template-rows: auto 1fr auto;\n  gap: 20px;\n  height: 100vh;\n}\n```\n\n### Named Grid Lines\n```css\n.grid-container {\n  display: grid;\n  grid-template-columns: [sidebar-start] 250px [sidebar-end main-start] 1fr [main-end];\n  grid-template-rows: [header-start] 60px [header-end content-start] 1fr [content-end];\n}\n```\n\n## Grid Areas\n\n### Template Areas\n```css\n.layout {\n  display: grid;\n  grid-template-areas:\n    "header header header"\n    "sidebar main aside"\n    "footer footer footer";\n  grid-template-columns: 200px 1fr 150px;\n  grid-template-rows: 60px 1fr 40px;\n}\n\n.header { grid-area: header; }\n.sidebar { grid-area: sidebar; }\n.main { grid-area: main; }\n.aside { grid-area: aside; }\n.footer { grid-area: footer; }\n```\n\n## Responsive Design\n\n### Auto-fit and Auto-fill\n```css\n.responsive-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 20px;\n}\n```\n\n### Media Queries\n```css\n@media (max-width: 768px) {\n  .grid-container {\n    grid-template-columns: 1fr;\n    grid-template-areas:\n      "header"\n      "main"\n      "sidebar"\n      "footer";\n  }\n}\n```',category:"tutorial",tags:["css","grid","layout","frontend","responsive"],updatedAt:"2024-01-12T08:15:00.000Z"},{id:"8",name:"Security Checklist for Web Applications",content:"# Security Checklist for Web Applications\n\nSecurity should be a top priority in web development. This checklist covers common vulnerabilities and mitigation strategies.\n\n## OWASP Top 10 Vulnerabilities\n\n### 1. Injection Attacks\n**Prevention:**\n- Use parameterized queries/prepared statements\n- Validate and sanitize all user input\n- Use ORM/ODM frameworks with built-in protection\n\n```javascript\n// \u274c Vulnerable to SQL injection\nconst query = `SELECT * FROM users WHERE id = ${userId}`;\n\n// \u2705 Safe parameterized query\nconst query = 'SELECT * FROM users WHERE id = ?';\ndb.query(query, [userId]);\n```\n\n### 2. Cross-Site Scripting (XSS)\n**Prevention:**\n- Escape output data\n- Use Content Security Policy (CSP)\n- Validate input on both client and server\n\n### 3. Cross-Site Request Forgery (CSRF)\n**Prevention:**\n- Use CSRF tokens\n- Implement SameSite cookie attributes\n- Verify referrer headers\n\n## Authentication & Authorization\n\n### Password Security\n- Enforce strong password policies\n- Use bcrypt or similar for hashing\n- Implement account lockout mechanisms\n- Enable two-factor authentication\n\n### Session Management\n```javascript\n// Secure session configuration\napp.use(session({\n  secret: process.env.SESSION_SECRET,\n  secure: true, // HTTPS only\n  httpOnly: true, // Prevent XSS\n  sameSite: 'strict' // CSRF protection\n}));\n```\n\n## Data Protection\n- Encrypt sensitive data at rest\n- Use HTTPS for all communications\n- Implement proper access controls\n- Regular security audits and penetration testing",category:"reference",tags:["security","web","vulnerabilities","checklist"],updatedAt:"2024-01-21T12:45:00.000Z"},{id:"9",name:"Git Workflow Guidelines",content:"# Git Workflow Guidelines\n\nEffective Git workflows improve team collaboration and code quality. This document covers branching strategies, commit conventions, and merge practices.\n\n## Branching Strategy\n\n### GitFlow Model\n```\nmain (production)\n\u251c\u2500\u2500 develop (integration)\n    \u251c\u2500\u2500 feature/user-authentication\n    \u251c\u2500\u2500 feature/payment-integration\n    \u2514\u2500\u2500 hotfix/critical-bug-fix\n```\n\n### Branch Naming Conventions\n- **feature/**: New features (`feature/user-profile`)\n- **bugfix/**: Bug fixes (`bugfix/login-error`)\n- **hotfix/**: Critical production fixes (`hotfix/security-patch`)\n- **release/**: Release preparation (`release/v1.2.0`)\n\n## Commit Conventions\n\n### Conventional Commits\n```\n<type>[optional scope]: <description>\n\n[optional body]\n\n[optional footer(s)]\n```\n\n### Commit Types\n- **feat**: New feature\n- **fix**: Bug fix\n- **docs**: Documentation changes\n- **style**: Code style changes (formatting, etc.)\n- **refactor**: Code refactoring\n- **test**: Adding or updating tests\n- **chore**: Maintenance tasks\n\n### Examples\n```\nfeat(auth): add password reset functionality\n\nfix(api): resolve user data validation error\n\ndocs(readme): update installation instructions\n\nrefactor(utils): simplify date formatting functions\n```\n\n## Merge Practices\n\n### Pull Request Guidelines\n1. Create descriptive PR titles and descriptions\n2. Link related issues\n3. Request appropriate reviewers\n4. Ensure CI/CD passes\n5. Squash commits before merging\n\n### Code Review Checklist\n- Code follows project standards\n- Tests are included and passing\n- Documentation is updated\n- No security vulnerabilities\n- Performance considerations addressed",category:"standard",tags:["git","workflow","collaboration","version-control"],updatedAt:"2024-01-19T15:10:00.000Z"},{id:"10",name:"Performance Optimization Techniques",content:'# Performance Optimization Techniques\n\nApplication performance directly impacts user experience. This comprehensive guide covers frontend and backend optimization strategies.\n\n## Frontend Optimization\n\n### 1. Code Splitting\n```javascript\n// Dynamic imports for code splitting\nconst LazyComponent = lazy(() => import(\'./LazyComponent\'));\n\n// Route-based code splitting\nconst Home = lazy(() => import(\'./pages/Home\'));\nconst About = lazy(() => import(\'./pages/About\'));\n```\n\n### 2. Image Optimization\n- Use modern formats (WebP, AVIF)\n- Implement responsive images\n- Add lazy loading\n- Optimize image sizes\n\n```html\n<img\n  src="image.webp"\n  alt="Description"\n  loading="lazy"\n  srcset="image-320w.webp 320w, image-640w.webp 640w"\n  sizes="(max-width: 320px) 280px, 640px"\n>\n```\n\n### 3. Caching Strategies\n- Browser caching with proper headers\n- Service workers for offline functionality\n- CDN for static assets\n- Application-level caching\n\n## Backend Optimization\n\n### 1. Database Performance\n```sql\n-- Use indexes for frequently queried columns\nCREATE INDEX idx_user_email ON users(email);\n\n-- Optimize queries with EXPLAIN\nEXPLAIN SELECT * FROM orders\nWHERE user_id = 123 AND status = \'active\';\n```\n\n### 2. API Optimization\n- Implement response caching\n- Use database connection pooling\n- Optimize N+1 query problems\n- Implement pagination for large datasets\n\n### 3. Server-Side Caching\n```javascript\n// Redis caching example\nconst cached = await redis.get(`user:${userId}`);\nif (cached) {\n  return JSON.parse(cached);\n}\n\nconst user = await database.getUser(userId);\nawait redis.setex(`user:${userId}`, 3600, JSON.stringify(user));\nreturn user;\n```\n\n## Monitoring and Metrics\n\n### Key Performance Indicators\n- **First Contentful Paint (FCP)**: < 1.8s\n- **Largest Contentful Paint (LCP)**: < 2.5s\n- **First Input Delay (FID)**: < 100ms\n- **Cumulative Layout Shift (CLS)**: < 0.1\n\n### Performance Monitoring Tools\n- Google PageSpeed Insights\n- Lighthouse\n- WebPageTest\n- Application Performance Monitoring (APM) tools',category:"guide",tags:["performance","optimization","frontend","backend"],updatedAt:"2024-01-23T10:25:00.000Z"}]},4691:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParsingToolFunction=t.ParsingFunction=t.isRunnableFunctionWithParse=void 0,t.isRunnableFunctionWithParse=function(e){return"function"===typeof e.parse};t.ParsingFunction=class{constructor(e){this.function=e.function,this.parse=e.parse,this.parameters=e.parameters,this.description=e.description,this.name=e.name}};t.ParsingToolFunction=class{constructor(e){this.type="function",this.function=e}}},4769:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EvalListResponsesPage=t.Evals=void 0;const i=n(2802),a=n(8757),c=o(n(6003)),l=n(6003),u=n(2510);class d extends i.APIResource{constructor(){super(...arguments),this.runs=new c.Runs(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,n){return this._client.post(`/evals/${e}`,{body:t,...n})}list(e={},t){return(0,a.isRequestOptions)(e)?this.list({},e):this._client.getAPIList("/evals",p,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}t.Evals=d;class p extends u.CursorPage{}t.EvalListResponsesPage=p,d.EvalListResponsesPage=p,d.Runs=l.Runs,d.RunListResponsesPage=l.RunListResponsesPage},4945:(e,t,n)=>{var r="undefined"!==typeof globalThis&&globalThis||"undefined"!==typeof self&&self||"undefined"!==typeof n.g&&n.g,s=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||"undefined"!==typeof n.g&&n.g||{},s="URLSearchParams"in r,o="Symbol"in r&&"iterator"in Symbol,i="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in r,c="ArrayBuffer"in r;if(c)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function d(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function p(e){return"string"!==typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function m(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function g(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function y(e){var t=new FileReader,n=g(t);return t.readAsArrayBuffer(e),n}function b(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:s&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=b(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=b(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=m(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(i)return this.blob().then(y);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,n=g(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),s=r?r[1]:"utf-8";return t.readAsText(e,s),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=d(e),t=p(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},f.prototype.delete=function(e){delete this.map[d(e)]},f.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},f.prototype.set=function(e,t){this.map[d(e)]=p(t)},f.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},f.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),h(e)},f.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),h(e)},f.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),h(e)},o&&(f.prototype[Symbol.iterator]=f.prototype.entries);var v=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function _(e,t){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=function(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in r)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),("GET"===this.method||"HEAD"===this.method)&&("no-store"===t.cache||"no-cache"===t.cache)){var s=/([?&])_=[^&]*/;if(s.test(this.url))this.url=this.url.replace(s,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function P(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),s=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(s))}}),t}function O(e){var t=new f;return e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var s=n.join(":").trim();try{t.append(r,s)}catch(o){}}}),t}function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},w.call(_.prototype),w.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},E.error=function(){var e=new E(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var A=[301,302,303,307,308];E.redirect=function(e,t){if(-1===A.indexOf(t))throw new RangeError("Invalid status code");return new E(null,{status:t,headers:{location:e}})},t.DOMException=r.DOMException;try{new t.DOMException}catch(R){t.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function S(e,n){return new Promise(function(s,o){var a=new _(e,n);if(a.signal&&a.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function u(){l.abort()}if(l.onload=function(){var e={statusText:l.statusText,headers:O(l.getAllResponseHeaders()||"")};0===a.url.indexOf("file://")&&(l.status<200||l.status>599)?e.status=200:e.status=l.status,e.url="responseURL"in l?l.responseURL:e.headers.get("X-Request-URL");var t="response"in l?l.response:l.responseText;setTimeout(function(){s(new E(t,e))},0)},l.onerror=function(){setTimeout(function(){o(new TypeError("Network request failed"))},0)},l.ontimeout=function(){setTimeout(function(){o(new TypeError("Network request timed out"))},0)},l.onabort=function(){setTimeout(function(){o(new t.DOMException("Aborted","AbortError"))},0)},l.open(a.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?l.withCredentials=!0:"omit"===a.credentials&&(l.withCredentials=!1),"responseType"in l&&(i?l.responseType="blob":c&&(l.responseType="arraybuffer")),n&&"object"===typeof n.headers&&!(n.headers instanceof f||r.Headers&&n.headers instanceof r.Headers)){var h=[];Object.getOwnPropertyNames(n.headers).forEach(function(e){h.push(d(e)),l.setRequestHeader(e,p(n.headers[e]))}),a.headers.forEach(function(e,t){-1===h.indexOf(t)&&l.setRequestHeader(t,e)})}else a.headers.forEach(function(e,t){l.setRequestHeader(t,e)});a.signal&&(a.signal.addEventListener("abort",u),l.onreadystatechange=function(){4===l.readyState&&a.signal.removeEventListener("abort",u)}),l.send("undefined"===typeof a._bodyInit?null:a._bodyInit)})}S.polyfill=!0,r.fetch||(r.fetch=S,r.Headers=f,r.Request=_,r.Response=E),t.Headers=f,t.Request=_,t.Response=E,t.fetch=S}({})}(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var o=r.fetch?r:s;(t=o.fetch).default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t},4973:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractEntitiesAndReplace=function(e,t){const n=new Set;if(t&&t.length>0){const r=new RegExp(`\\b(${t.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|")})\\b`,"gi");e=e.replace(r,e=>(n.add(e),`<${e.replace(/\s+/g,"_")}></${e.replace(/\s+/g,"_")}>`))}const r=/\{\{([^}]+)\}\}/g;let s,o=e;for(;null!==(s=r.exec(e));){const e=s[1].trim();e&&(n.add(e),o=o.replace(new RegExp(`\\{\\{\\s*${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}\\s*\\}\\}`),`<${e.replace(/\s+/g,"_")}></${e.replace(/\s+/g,"_")}>`))}return{entities:Array.from(n),replaced:o}}},4975:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Moderations=void 0;const r=n(2802);class s extends r.APIResource{create(e,t){return this._client.post("/moderations",{body:e,...t})}}t.Moderations=s},5062:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Content=void 0;const r=n(2802);class s extends r.APIResource{retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}/content`,{...n,headers:{Accept:"application/binary",...n?.headers},__binaryResponse:!0})}}t.Content=s},5113:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Speech=void 0;const r=n(2802);class s extends r.APIResource{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t?.headers},__binaryResponse:!0})}}t.Speech=s},5126:function(e,t,n){"use strict";var r,s,o,i,a,c,l,u,d,p,h,f,m=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},g=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ChatCompletionStream=void 0;const y=n(9526),b=n(1118),w=n(6716),v=n(3357),_=n(3690);class P extends b.AbstractChatCompletionRunner{constructor(e){super(),r.add(this),s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),m(this,s,e,"f"),m(this,o,[],"f")}get currentChatCompletionSnapshot(){return g(this,i,"f")}static fromReadableStream(e){const t=new P(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new P(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){super._createChatCompletion;const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),g(this,r,"m",a).call(this);const o=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const i of o)g(this,r,"m",l).call(this,i);if(o.controller.signal?.aborted)throw new y.APIUserAbortError;return this._addChatCompletion(g(this,r,"m",p).call(this))}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),g(this,r,"m",a).call(this),this._connected();const s=w.Stream.fromReadableStream(e,this.controller);let o;for await(const i of s)o&&o!==i.id&&this._addChatCompletion(g(this,r,"m",p).call(this)),g(this,r,"m",l).call(this,i),o=i.id;if(s.controller.signal?.aborted)throw new y.APIUserAbortError;return this._addChatCompletion(g(this,r,"m",p).call(this))}[(s=new WeakMap,o=new WeakMap,i=new WeakMap,r=new WeakSet,a=function(){this.ended||m(this,i,void 0,"f")},c=function(e){let t=g(this,o,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},g(this,o,"f")[e.index]=t,t)},l=function(e){if(this.ended)return;const t=g(this,r,"m",f).call(this,e);this._emit("chunk",e,t);for(const n of e.choices){const e=t.choices[n.index];null!=n.delta.content&&"assistant"===e.message?.role&&e.message?.content&&(this._emit("content",n.delta.content,e.message.content),this._emit("content.delta",{delta:n.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=n.delta.refusal&&"assistant"===e.message?.role&&e.message?.refusal&&this._emit("refusal.delta",{delta:n.delta.refusal,snapshot:e.message.refusal}),null!=n.logprobs?.content&&"assistant"===e.message?.role&&this._emit("logprobs.content.delta",{content:n.logprobs?.content,snapshot:e.logprobs?.content??[]}),null!=n.logprobs?.refusal&&"assistant"===e.message?.role&&this._emit("logprobs.refusal.delta",{refusal:n.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});const s=g(this,r,"m",c).call(this,e);e.finish_reason&&(g(this,r,"m",d).call(this,e),null!=s.current_tool_call_index&&g(this,r,"m",u).call(this,e,s.current_tool_call_index));for(const t of n.delta.tool_calls??[])s.current_tool_call_index!==t.index&&(g(this,r,"m",d).call(this,e),null!=s.current_tool_call_index&&g(this,r,"m",u).call(this,e,s.current_tool_call_index)),s.current_tool_call_index=t.index;for(const t of n.delta.tool_calls??[]){const n=e.message.tool_calls?.[t.index];n?.type&&("function"===n?.type?this._emit("tool_calls.function.arguments.delta",{name:n.function?.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):A(n?.type))}}},u=function(e,t){if(g(this,r,"m",c).call(this,e).done_tool_calls.has(t))return;const n=e.message.tool_calls?.[t];if(!n)throw new Error("no tool call snapshot");if(!n.type)throw new Error("tool call snapshot missing `type`");if("function"===n.type){const e=g(this,s,"f")?.tools?.find(e=>"function"===e.type&&e.function.name===n.function.name);this._emit("tool_calls.function.arguments.done",{name:n.function.name,index:t,arguments:n.function.arguments,parsed_arguments:(0,v.isAutoParsableTool)(e)?e.$parseRaw(n.function.arguments):e?.function.strict?JSON.parse(n.function.arguments):null})}else n.type},d=function(e){const t=g(this,r,"m",c).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;const n=g(this,r,"m",h).call(this);this._emit("content.done",{content:e.message.content,parsed:n?n.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},p=function(){if(this.ended)throw new y.OpenAIError("stream has ended, this shouldn't happen");const e=g(this,i,"f");if(!e)throw new y.OpenAIError("request ended without sending any chunks");return m(this,i,void 0,"f"),m(this,o,[],"f"),function(e,t){const{id:n,choices:r,created:s,model:o,system_fingerprint:i,...a}=e,c={...a,id:n,choices:r.map(({message:t,finish_reason:n,index:r,logprobs:s,...o})=>{if(!n)throw new y.OpenAIError(`missing finish_reason for choice ${r}`);const{content:i=null,function_call:a,tool_calls:c,...l}=t,u=t.role;if(!u)throw new y.OpenAIError(`missing role for choice ${r}`);if(a){const{arguments:e,name:c}=a;if(null==e)throw new y.OpenAIError(`missing function_call.arguments for choice ${r}`);if(!c)throw new y.OpenAIError(`missing function_call.name for choice ${r}`);return{...o,message:{content:i,function_call:{arguments:e,name:c},role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:s}}return c?{...o,index:r,finish_reason:n,logprobs:s,message:{...l,role:u,content:i,refusal:t.refusal??null,tool_calls:c.map((t,n)=>{const{function:s,type:o,id:i,...a}=t,{arguments:c,name:l,...u}=s||{};if(null==i)throw new y.OpenAIError(`missing choices[${r}].tool_calls[${n}].id\n${O(e)}`);if(null==o)throw new y.OpenAIError(`missing choices[${r}].tool_calls[${n}].type\n${O(e)}`);if(null==l)throw new y.OpenAIError(`missing choices[${r}].tool_calls[${n}].function.name\n${O(e)}`);if(null==c)throw new y.OpenAIError(`missing choices[${r}].tool_calls[${n}].function.arguments\n${O(e)}`);return{...a,id:i,type:o,function:{...u,name:l,arguments:c}}})}}:{...o,message:{...l,content:i,role:u,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:s}}),created:s,model:o,object:"chat.completion",...i?{system_fingerprint:i}:{}};return(0,v.maybeParseChatCompletion)(c,t)}(e,g(this,s,"f"))},h=function(){const e=g(this,s,"f")?.response_format;return(0,v.isAutoParsableResponseFormat)(e)?e:null},f=function(e){var t,n,o,a;let c=g(this,i,"f");const{choices:l,...u}=e;c?Object.assign(c,u):c=m(this,i,{...u,choices:[]},"f");for(const{delta:i,finish_reason:d,index:p,logprobs:f=null,...m}of e.choices){let e=c.choices[p];if(e||(e=c.choices[p]={finish_reason:d,index:p,message:{},logprobs:f,...m}),f)if(e.logprobs){const{content:r,refusal:s,...o}=f;E(o),Object.assign(e.logprobs,o),r&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...r)),s&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...s))}else e.logprobs=Object.assign({},f);if(d&&(e.finish_reason=d,g(this,s,"f")&&(0,v.hasAutoParseableInput)(g(this,s,"f")))){if("length"===d)throw new y.LengthFinishReasonError;if("content_filter"===d)throw new y.ContentFilterFinishReasonError}if(Object.assign(e,m),!i)continue;const{content:l,refusal:u,function_call:b,role:w,tool_calls:P,...O}=i;if(E(O),Object.assign(e.message,O),u&&(e.message.refusal=(e.message.refusal||"")+u),w&&(e.message.role=w),b&&(e.message.function_call?(b.name&&(e.message.function_call.name=b.name),b.arguments&&((o=e.message.function_call).arguments??(o.arguments=""),e.message.function_call.arguments+=b.arguments)):e.message.function_call=b),l&&(e.message.content=(e.message.content||"")+l,!e.message.refusal&&g(this,r,"m",h).call(this)&&(e.message.parsed=(0,_.partialParse)(e.message.content))),P){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:n,type:r,function:o,...i}of P){const c=(a=e.message.tool_calls)[t]??(a[t]={});Object.assign(c,i),n&&(c.id=n),r&&(c.type=r),o&&(c.function??(c.function={name:o.name??"",arguments:""})),o?.name&&(c.function.name=o.name),o?.arguments&&(c.function.arguments+=o.arguments,(0,v.shouldParseToolCall)(g(this,s,"f"),c)&&(c.function.parsed_arguments=(0,_.partialParse)(c.function.arguments)))}}}return c},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new w.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function O(e){return JSON.stringify(e)}function E(e){}function A(e){}t.ChatCompletionStream=P},5137:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraderModels=void 0;const r=n(2802);class s extends r.APIResource{}t.GraderModels=s},5257:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RFC3986=t.RFC1738=t.formatters=t.default_format=void 0,t.default_format="RFC3986",t.formatters={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},t.RFC1738="RFC1738",t.RFC3986="RFC3986"},5392:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="4.104.0"},5595:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PermissionCreateResponsesPage=t.Permissions=void 0;const r=n(2802),s=n(8757),o=n(2510);class i extends r.APIResource{create(e,t,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,a,{body:t,method:"post",...n})}retrieve(e,t={},n){return(0,s.isRequestOptions)(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}del(e,t,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,n)}}t.Permissions=i;class a extends o.Page{}t.PermissionCreateResponsesPage=a,i.PermissionCreateResponsesPage=a},5653:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5856:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseItemsPage=t.InputItems=void 0;const r=n(2802),s=n(8757),o=n(477);Object.defineProperty(t,"ResponseItemsPage",{enumerable:!0,get:function(){return o.ResponseItemsPage}});class i extends r.APIResource{list(e,t={},n){return(0,s.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,o.ResponseItemsPage,{query:t,...n})}}t.InputItems=i},6003:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RunListResponsesPage=t.Runs=void 0;const i=n(2802),a=n(8757),c=o(n(1109)),l=n(1109),u=n(2510);class d extends i.APIResource{constructor(){super(...arguments),this.outputItems=new c.OutputItems(this._client)}create(e,t,n){return this._client.post(`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){return this._client.get(`/evals/${e}/runs/${t}`,n)}list(e,t={},n){return(0,a.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,p,{query:t,...n})}del(e,t,n){return this._client.delete(`/evals/${e}/runs/${t}`,n)}cancel(e,t,n){return this._client.post(`/evals/${e}/runs/${t}`,n)}}t.Runs=d;class p extends u.CursorPage{}t.RunListResponsesPage=p,d.RunListResponsesPage=p,d.OutputItems=l.OutputItems,d.OutputItemListResponsesPage=l.OutputItemListResponsesPage},6059:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessagesPage=t.Messages=void 0;const r=n(2802),s=n(8757),o=n(2510);class i extends r.APIResource{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}list(e,t={},n){return(0,s.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,a,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n?.headers}})}}t.Messages=i;class a extends o.CursorPage{}t.MessagesPage=a,i.MessagesPage=a},6111:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chat=void 0;const i=n(2802),a=o(n(3054)),c=n(3054);class l extends i.APIResource{constructor(){super(...arguments),this.completions=new a.Completions(this._client)}}t.Chat=l,l.Completions=c.Completions,l.ChatCompletionsPage=c.ChatCompletionsPage},6183:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Beta=void 0;const i=n(2802),a=o(n(2964)),c=o(n(1356)),l=n(2964),u=o(n(3706)),d=n(3706),p=o(n(2682)),h=n(2682);n(1356);class f extends i.APIResource{constructor(){super(...arguments),this.realtime=new u.Realtime(this._client),this.chat=new c.Chat(this._client),this.assistants=new a.Assistants(this._client),this.threads=new p.Threads(this._client)}}t.Beta=f,f.Realtime=d.Realtime,f.Assistants=l.Assistants,f.AssistantsPage=l.AssistantsPage,f.Threads=h.Threads},6289:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPresent=t.isToolMessage=t.isFunctionMessage=t.isAssistantMessage=void 0;t.isAssistantMessage=e=>"assistant"===e?.role;t.isFunctionMessage=e=>"function"===e?.role;t.isToolMessage=e=>"tool"===e?.role,t.isPresent=function(e){return null!=e}},6425:(e,t,n)=>{"use strict";function r(e,t){return function(){return e.apply(t,arguments)}}const{toString:s}=Object.prototype,{getPrototypeOf:o}=Object,{iterator:i,toStringTag:a}=Symbol,c=(l=Object.create(null),e=>{const t=s.call(e);return l[t]||(l[t]=t.slice(8,-1).toLowerCase())});var l;const u=e=>(e=e.toLowerCase(),t=>c(t)===e),d=e=>t=>typeof t===e,{isArray:p}=Array,h=d("undefined");function f(e){return null!==e&&!h(e)&&null!==e.constructor&&!h(e.constructor)&&y(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const m=u("ArrayBuffer");const g=d("string"),y=d("function"),b=d("number"),w=e=>null!==e&&"object"===typeof e,v=e=>{if("object"!==c(e))return!1;const t=o(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(a in e)&&!(i in e)},_=u("Date"),P=u("File"),O=u("Blob"),E=u("FileList"),A=u("URLSearchParams"),[S,R,C,x]=["ReadableStream","Request","Response","Headers"].map(u);function j(e,t,{allOwnKeys:n=!1}={}){if(null===e||"undefined"===typeof e)return;let r,s;if("object"!==typeof e&&(e=[e]),p(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{if(f(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),o=s.length;let i;for(r=0;r<o;r++)i=s[r],t.call(null,e[i],i,e)}}function I(e,t){if(f(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const T="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:n.g,M=e=>!h(e)&&e!==T;const k=(F="undefined"!==typeof Uint8Array&&o(Uint8Array),e=>F&&e instanceof F);var F;const D=u("HTMLFormElement"),L=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),B=u("RegExp"),U=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};j(n,(n,s)=>{let o;!1!==(o=t(n,s,e))&&(r[s]=o||n)}),Object.defineProperties(e,r)};const N=u("AsyncFunction"),$=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],T.addEventListener("message",({source:e,data:t})=>{e===T&&t===n&&r.length&&r.shift()()},!1),e=>{r.push(e),T.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,y(T.postMessage)),q="undefined"!==typeof queueMicrotask?queueMicrotask.bind(T):"undefined"!==typeof process&&process.nextTick||$;var z={isArray:p,isArrayBuffer:m,isBuffer:f,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||y(e.append)&&("formdata"===(t=c(e))||"object"===t&&y(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&m(e.buffer),t},isString:g,isNumber:b,isBoolean:e=>!0===e||!1===e,isObject:w,isPlainObject:v,isEmptyObject:e=>{if(!w(e)||f(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:S,isRequest:R,isResponse:C,isHeaders:x,isUndefined:h,isDate:_,isFile:P,isBlob:O,isRegExp:B,isFunction:y,isStream:e=>w(e)&&y(e.pipe),isURLSearchParams:A,isTypedArray:k,isFileList:E,forEach:j,merge:function e(){const{caseless:t}=M(this)&&this||{},n={},r=(r,s)=>{const o=t&&I(n,s)||s;v(n[o])&&v(r)?n[o]=e(n[o],r):v(r)?n[o]=e({},r):p(r)?n[o]=r.slice():n[o]=r};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&j(arguments[s],r);return n},extend:(e,t,n,{allOwnKeys:s}={})=>(j(t,(t,s)=>{n&&y(t)?e[s]=r(t,n):e[s]=t},{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,i,a;const c={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)a=s[i],r&&!r(a,e,t)||c[a]||(t[a]=e[a],c[a]=!0);e=!1!==n&&o(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:u,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(p(e))return e;let t=e.length;if(!b(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[i]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:D,hasOwnProperty:L,hasOwnProp:L,reduceDescriptors:U,freezeMethods:e=>{U(e,(t,n)=>{if(y(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];y(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return p(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:I,global:T,isContextDefined:M,isSpecCompliantForm:function(e){return!!(e&&y(e.append)&&"FormData"===e[a]&&e[i])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(w(e)){if(t.indexOf(e)>=0)return;if(f(e))return e;if(!("toJSON"in e)){t[r]=e;const s=p(e)?[]:{};return j(e,(e,t)=>{const o=n(e,r+1);!h(o)&&(s[t]=o)}),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:N,isThenable:e=>e&&(w(e)||y(e))&&y(e.then)&&y(e.catch),setImmediate:$,asap:q,isIterable:e=>null!=e&&y(e[i])};function H(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}z.inherits(H,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}});const W=H.prototype,V={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{V[e]={value:e}}),Object.defineProperties(H,V),Object.defineProperty(W,"isAxiosError",{value:!0}),H.from=(e,t,n,r,s,o)=>{const i=Object.create(W);return z.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),H.call(i,e.message,t,n,r,s),i.cause=e,i.name=e.name,o&&Object.assign(i,o),i};function J(e){return z.isPlainObject(e)||z.isArray(e)}function G(e){return z.endsWith(e,"[]")?e.slice(0,-2):e}function X(e,t,n){return e?e.concat(t).map(function(e,t){return e=G(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const K=z.toFlatObject(z,{},null,function(e){return/^is[A-Z]/.test(e)});function Q(e,t,n){if(!z.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=z.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!z.isUndefined(t[e])})).metaTokens,s=n.visitor||l,o=n.dots,i=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&z.isSpecCompliantForm(t);if(!z.isFunction(s))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(z.isDate(e))return e.toISOString();if(z.isBoolean(e))return e.toString();if(!a&&z.isBlob(e))throw new H("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(e)||z.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,s){let a=e;if(e&&!s&&"object"===typeof e)if(z.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(z.isArray(e)&&function(e){return z.isArray(e)&&!e.some(J)}(e)||(z.isFileList(e)||z.endsWith(n,"[]"))&&(a=z.toArray(e)))return n=G(n),a.forEach(function(e,r){!z.isUndefined(e)&&null!==e&&t.append(!0===i?X([n],r,o):null===i?n:n+"[]",c(e))}),!1;return!!J(e)||(t.append(X(s,n,o),c(e)),!1)}const u=[],d=Object.assign(K,{defaultVisitor:l,convertValue:c,isVisitable:J});if(!z.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!z.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),z.forEach(n,function(n,o){!0===(!(z.isUndefined(n)||null===n)&&s.call(t,n,z.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])}),u.pop()}}(e),t}function Z(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Y(e,t){this._pairs=[],e&&Q(e,this,t)}const ee=Y.prototype;function te(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ne(e,t,n){if(!t)return e;const r=n&&n.encode||te;z.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let o;if(o=s?s(t,n):z.isURLSearchParams(t)?t.toString():new Y(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}ee.append=function(e,t){this._pairs.push([e,t])},ee.toString=function(e){const t=e?function(t){return e.call(this,t,Z)}:Z;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};var re=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){z.forEach(this.handlers,function(t){null!==t&&e(t)})}},se={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},oe={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Y,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const ie="undefined"!==typeof window&&"undefined"!==typeof document,ae="object"===typeof navigator&&navigator||void 0,ce=ie&&(!ae||["ReactNative","NativeScript","NS"].indexOf(ae.product)<0),le="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ue=ie&&window.location.href||"http://localhost";var de={...Object.freeze({__proto__:null,hasBrowserEnv:ie,hasStandardBrowserWebWorkerEnv:le,hasStandardBrowserEnv:ce,navigator:ae,origin:ue}),...oe};function pe(e){function t(e,n,r,s){let o=e[s++];if("__proto__"===o)return!0;const i=Number.isFinite(+o),a=s>=e.length;if(o=!o&&z.isArray(r)?r.length:o,a)return z.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!i;r[o]&&z.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],s)&&z.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let o;for(r=0;r<s;r++)o=n[r],t[o]=e[o];return t}(r[o])),!i}if(z.isFormData(e)&&z.isFunction(e.entries)){const n={};return z.forEachEntry(e,(e,r)=>{t(function(e){return z.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null}const he={transitional:se,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=z.isObject(e);s&&z.isHTMLForm(e)&&(e=new FormData(e));if(z.isFormData(e))return r?JSON.stringify(pe(e)):e;if(z.isArrayBuffer(e)||z.isBuffer(e)||z.isStream(e)||z.isFile(e)||z.isBlob(e)||z.isReadableStream(e))return e;if(z.isArrayBufferView(e))return e.buffer;if(z.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Q(e,new de.classes.URLSearchParams,{visitor:function(e,t,n,r){return de.isNode&&z.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((o=z.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Q(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(z.isString(e))try{return(t||JSON.parse)(e),z.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||he.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(z.isResponse(e)||z.isReadableStream(e))return e;if(e&&z.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(s){if(n){if("SyntaxError"===s.name)throw H.from(s,H.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:de.classes.FormData,Blob:de.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],e=>{he.headers[e]={}});var fe=he;const me=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const ge=Symbol("internals");function ye(e){return e&&String(e).trim().toLowerCase()}function be(e){return!1===e||null==e?e:z.isArray(e)?e.map(be):String(e)}function we(e,t,n,r,s){return z.isFunction(r)?r.call(this,t,n):(s&&(t=n),z.isString(t)?z.isString(r)?-1!==t.indexOf(r):z.isRegExp(r)?r.test(t):void 0:void 0)}class ve{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=ye(t);if(!s)throw new Error("header name must be a non-empty string");const o=z.findKey(r,s);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=be(e))}const o=(e,t)=>z.forEach(e,(e,n)=>s(e,n,t));if(z.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(z.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&me[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(z.isObject(e)&&z.isIterable(e)){let n,r,s={};for(const t of e){if(!z.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(n=s[r])?z.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=ye(e)){const n=z.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(z.isFunction(t))return t.call(this,e,n);if(z.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ye(e)){const n=z.findKey(this,e);return!(!n||void 0===this[n]||t&&!we(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=ye(e)){const s=z.findKey(n,e);!s||t&&!we(0,n[s],s,t)||(delete n[s],r=!0)}}return z.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!we(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return z.forEach(this,(r,s)=>{const o=z.findKey(n,s);if(o)return t[o]=be(r),void delete t[s];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();i!==s&&delete t[s],t[i]=be(r),n[i]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return z.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&z.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=(this[ge]=this[ge]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=ye(e);t[r]||(!function(e,t){const n=z.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})})}(n,e),t[r]=!0)}return z.isArray(e)?e.forEach(r):r(e),this}}ve.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),z.reduceDescriptors(ve.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),z.freezeMethods(ve);var _e=ve;function Pe(e,t){const n=this||fe,r=t||n,s=_e.from(r.headers);let o=r.data;return z.forEach(e,function(e){o=e.call(n,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Oe(e){return!(!e||!e.__CANCEL__)}function Ee(e,t,n){H.call(this,e??"canceled",H.ERR_CANCELED,t,n),this.name="CanceledError"}function Ae(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new H("Request failed with status code "+n.status,[H.ERR_BAD_REQUEST,H.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}z.inherits(Ee,H,{__CANCEL__:!0});const Se=(e,t,n=3)=>{let r=0;const s=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,o=0,i=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[i];s||(s=c),n[o]=a,r[o]=c;let u=i,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),c-s<t)return;const p=l&&c-l;return p?Math.round(1e3*d/p):void 0}}(50,250);return function(e,t){let n,r,s=0,o=1e3/t;const i=(t,o=Date.now())=>{s=o,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[(...e)=>{const t=Date.now(),a=t-s;a>=o?i(e,t):(n=e,r||(r=setTimeout(()=>{r=null,i(n)},o-a)))},()=>n&&i(n)]}(n=>{const o=n.loaded,i=n.lengthComputable?n.total:void 0,a=o-r,c=s(a);r=o;e({loaded:o,total:i,progress:i?o/i:void 0,bytes:a,rate:c||void 0,estimated:c&&i&&o<=i?(i-o)/c:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})},n)},Re=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Ce=e=>(...t)=>z.asap(()=>e(...t));var xe=de.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,de.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(de.origin),de.navigator&&/(msie|trident)/i.test(de.navigator.userAgent)):()=>!0,je=de.hasStandardBrowserEnv?{write(e,t,n,r,s,o){const i=[e+"="+encodeURIComponent(t)];z.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),z.isString(r)&&i.push("path="+r),z.isString(s)&&i.push("domain="+s),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ie(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Te=e=>e instanceof _e?{...e}:e;function Me(e,t){t=t||{};const n={};function r(e,t,n,r){return z.isPlainObject(e)&&z.isPlainObject(t)?z.merge.call({caseless:r},e,t):z.isPlainObject(t)?z.merge({},t):z.isArray(t)?t.slice():t}function s(e,t,n,s){return z.isUndefined(t)?z.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function o(e,t){if(!z.isUndefined(t))return r(void 0,t)}function i(e,t){return z.isUndefined(t)?z.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,s,o){return o in t?r(n,s):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:a,headers:(e,t,n)=>s(Te(e),Te(t),0,!0)};return z.forEach(Object.keys({...e,...t}),function(r){const o=c[r]||s,i=o(e[r],t[r],r);z.isUndefined(i)&&o!==a||(n[r]=i)}),n}var ke=e=>{const t=Me({},e);let n,{data:r,withXSRFToken:s,xsrfHeaderName:o,xsrfCookieName:i,headers:a,auth:c}=t;if(t.headers=a=_e.from(a),t.url=ne(Ie(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),z.isFormData(r))if(de.hasStandardBrowserEnv||de.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(de.hasStandardBrowserEnv&&(s&&z.isFunction(s)&&(s=s(t)),s||!1!==s&&xe(t.url))){const e=o&&i&&je.read(i);e&&a.set(o,e)}return t};var Fe="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=ke(e);let s=r.data;const o=_e.from(r.headers).normalize();let i,a,c,l,u,{responseType:d,onUploadProgress:p,onDownloadProgress:h}=r;function f(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=_e.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Ae(function(e){t(e),f()},function(e){n(e),f()},{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new H("Request aborted",H.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new H("Network Error",H.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||se;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new H(t,s.clarifyTimeoutError?H.ETIMEDOUT:H.ECONNABORTED,e,m)),m=null},void 0===s&&o.setContentType(null),"setRequestHeader"in m&&z.forEach(o.toJSON(),function(e,t){m.setRequestHeader(t,e)}),z.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),h&&([c,u]=Se(h,!0),m.addEventListener("progress",c)),p&&m.upload&&([a,l]=Se(p),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(i=t=>{m&&(n(!t||t.type?new Ee(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===de.protocols.indexOf(y)?n(new H("Unsupported protocol "+y+":",H.ERR_BAD_REQUEST,e)):m.send(s||null)})};var De=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const s=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof H?t:new Ee(t instanceof Error?t.message:t))}};let o=t&&setTimeout(()=>{o=null,s(new H(`timeout ${t} of ms exceeded`,H.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:a}=r;return a.unsubscribe=()=>z.asap(i),a}};const Le=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,s=0;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Be=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Ue=(e,t,n,r)=>{const s=async function*(e,t){for await(const n of Be(e))yield*Le(n,t)}(e,t);let o,i=0,a=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return a(),void e.close();let o=r.byteLength;if(n){let e=i+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),s.return())},{highWaterMark:2})},Ne="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,$e=Ne&&"function"===typeof ReadableStream,qe=Ne&&("function"===typeof TextEncoder?(ze=new TextEncoder,e=>ze.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var ze;const He=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},We=$e&&He(()=>{let e=!1;const t=new Request(de.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Ve=$e&&He(()=>z.isReadableStream(new Response("").body)),Je={stream:Ve&&(e=>e.body)};var Ge;Ne&&(Ge=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Je[e]&&(Je[e]=z.isFunction(Ge[e])?t=>t[e]():(t,n)=>{throw new H(`Response type '${e}' is not supported`,H.ERR_NOT_SUPPORT,n)})}));const Xe=async(e,t)=>{const n=z.toFiniteNumber(e.getContentLength());return n??(async e=>{if(null==e)return 0;if(z.isBlob(e))return e.size;if(z.isSpecCompliantForm(e)){const t=new Request(de.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return z.isArrayBufferView(e)||z.isArrayBuffer(e)?e.byteLength:(z.isURLSearchParams(e)&&(e+=""),z.isString(e)?(await qe(e)).byteLength:void 0)})(t)};const Ke={http:null,xhr:Fe,fetch:Ne&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:o,timeout:i,onDownloadProgress:a,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:p}=ke(e);l=l?(l+"").toLowerCase():"text";let h,f=De([s,o&&o.toAbortSignal()],i);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(c&&We&&"get"!==n&&"head"!==n&&0!==(g=await Xe(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(z.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Re(g,Se(Ce(c)));r=Ue(n.body,65536,e,t)}}z.isString(d)||(d=d?"include":"omit");const s="credentials"in Request.prototype;h=new Request(t,{...p,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:s?d:void 0});let o=await fetch(h,p);const i=Ve&&("stream"===l||"response"===l);if(Ve&&(a||i&&m)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=o[t]});const t=z.toFiniteNumber(o.headers.get("content-length")),[n,r]=a&&Re(t,Se(Ce(a),!0))||[];o=new Response(Ue(o.body,65536,n,()=>{r&&r(),m&&m()}),e)}l=l||"text";let y=await Je[z.findKey(Je,l)||"text"](o,e);return!i&&m&&m(),await new Promise((t,n)=>{Ae(t,n,{data:y,headers:_e.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:h})})}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new H("Network Error",H.ERR_NETWORK,e,h),{cause:y.cause||y});throw H.from(y,y&&y.code,e,h)}})};z.forEach(Ke,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const Qe=e=>`- ${e}`,Ze=e=>z.isFunction(e)||null===e||!1===e;var Ye=e=>{e=z.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!Ze(n)&&(r=Ke[(t=String(n)).toLowerCase()],void 0===r))throw new H(`Unknown adapter '${t}'`);if(r)break;s[t||"#"+o]=r}if(!r){const e=Object.entries(s).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new H("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Qe).join("\n"):" "+Qe(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function et(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ee(null,e)}function tt(e){et(e),e.headers=_e.from(e.headers),e.data=Pe.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ye(e.adapter||fe.adapter)(e).then(function(t){return et(e),t.data=Pe.call(e,e.transformResponse,t),t.headers=_e.from(t.headers),t},function(t){return Oe(t)||(et(e),t&&t.response&&(t.response.data=Pe.call(e,e.transformResponse,t.response),t.response.headers=_e.from(t.response.headers))),Promise.reject(t)})}const nt="1.11.0",rt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{rt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const st={};rt.transitional=function(e,t,n){return(r,s,o)=>{if(!1===e)throw new H(function(e,t){return"[Axios v"+nt+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}(s," has been removed"+(t?" in "+t:"")),H.ERR_DEPRECATED);return t&&!st[s]&&(st[s]=!0),!e||e(r,s,o)}},rt.spelling=function(e){return(e,t)=>!0};var ot={assertOptions:function(e,t,n){if("object"!==typeof e)throw new H("options must be an object",H.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const o=r[s],i=t[o];if(i){const t=e[o],n=void 0===t||i(t,o,e);if(!0!==n)throw new H("option "+o+" must be "+n,H.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new H("Unknown option "+o,H.ERR_BAD_OPTION)}},validators:rt};const it=ot.validators;class at{constructor(e){this.defaults=e||{},this.interceptors={request:new re,response:new re}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Me(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&ot.assertOptions(n,{silentJSONParsing:it.transitional(it.boolean),forcedJSONParsing:it.transitional(it.boolean),clarifyTimeoutError:it.transitional(it.boolean)},!1),null!=r&&(z.isFunction(r)?t.paramsSerializer={serialize:r}:ot.assertOptions(r,{encode:it.function,serialize:it.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ot.assertOptions(t,{baseUrl:it.spelling("baseURL"),withXsrfToken:it.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=s&&z.merge(s.common,s[t.method]);s&&z.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=_e.concat(o,s);const i=[];let a=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const c=[];let l;this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let u,d=0;if(!a){const e=[tt.bind(this),void 0];for(e.unshift(...i),e.push(...c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=i.length;let p=t;for(d=0;d<u;){const e=i[d++],t=i[d++];try{p=e(p)}catch(h){t.call(this,h);break}}try{l=tt.call(this,p)}catch(h){return Promise.reject(h)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return ne(Ie((e=Me(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}z.forEach(["delete","get","head","options"],function(e){at.prototype[e]=function(t,n){return this.request(Me(n||{},{method:e,url:t,data:(n||{}).data}))}}),z.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,s){return this.request(Me(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}at.prototype[e]=t(),at.prototype[e+"Form"]=t(!0)});var ct=at;class lt{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,s){n.reason||(n.reason=new Ee(e,r,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new lt(function(t){e=t}),cancel:e}}}var ut=lt;const dt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(dt).forEach(([e,t])=>{dt[t]=e});var pt=dt;const ht=function e(t){const n=new ct(t),s=r(ct.prototype.request,n);return z.extend(s,ct.prototype,n,{allOwnKeys:!0}),z.extend(s,n,null,{allOwnKeys:!0}),s.create=function(n){return e(Me(t,n))},s}(fe);ht.Axios=ct,ht.CanceledError=Ee,ht.CancelToken=ut,ht.isCancel=Oe,ht.VERSION=nt,ht.toFormData=Q,ht.AxiosError=H,ht.Cancel=ht.CanceledError,ht.all=function(e){return Promise.all(e)},ht.spread=function(e){return function(t){return e.apply(null,t)}},ht.isAxiosError=function(e){return z.isObject(e)&&!0===e.isAxiosError},ht.mergeConfig=Me,ht.AxiosHeaders=_e,ht.formToJSON=e=>pe(z.isHTMLForm(e)?new FormData(e):e),ht.getAdapter=Ye,ht.HttpStatusCode=pt,ht.default=ht,e.exports=ht},6636:function(e,t,n){"use strict";var r,s,o,i,a,c,l,u,d=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},p=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ResponseStream=void 0;const h=n(9526),f=n(460),m=n(7759);class g extends f.EventStream{constructor(e){super(),r.add(this),s.set(this,void 0),o.set(this,void 0),i.set(this,void 0),d(this,s,e,"f")}static createResponse(e,t,n){const r=new g(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,n){const s=n?.signal;let o;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),p(this,r,"m",a).call(this);let i=null;"response_id"in t?(o=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),i=t.starting_after??null):o=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const a of o)p(this,r,"m",c).call(this,a,i);if(o.controller.signal?.aborted)throw new h.APIUserAbortError;return p(this,r,"m",l).call(this)}[(s=new WeakMap,o=new WeakMap,i=new WeakMap,r=new WeakSet,a=function(){this.ended||d(this,o,void 0,"f")},c=function(e,t){if(this.ended)return;const n=(e,n)=>{(null==t||n.sequence_number>t)&&this._emit(e,n)},s=p(this,r,"m",u).call(this,e);switch(n("event",e),e.type){case"response.output_text.delta":{const t=s.output[e.output_index];if(!t)throw new h.OpenAIError(`missing output at index ${e.output_index}`);if("message"===t.type){const r=t.content[e.content_index];if(!r)throw new h.OpenAIError(`missing content at index ${e.content_index}`);if("output_text"!==r.type)throw new h.OpenAIError(`expected content to be 'output_text', got ${r.type}`);n("response.output_text.delta",{...e,snapshot:r.text})}break}case"response.function_call_arguments.delta":{const t=s.output[e.output_index];if(!t)throw new h.OpenAIError(`missing output at index ${e.output_index}`);"function_call"===t.type&&n("response.function_call_arguments.delta",{...e,snapshot:t.arguments});break}default:n(e.type,e)}},l=function(){if(this.ended)throw new h.OpenAIError("stream has ended, this shouldn't happen");const e=p(this,o,"f");if(!e)throw new h.OpenAIError("request ended without sending any events");d(this,o,void 0,"f");const t=function(e,t){return(0,m.maybeParseResponse)(e,t)}(e,p(this,s,"f"));return d(this,i,t,"f"),t},u=function(e){let t=p(this,o,"f");if(!t){if("response.created"!==e.type)throw new h.OpenAIError(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return t=d(this,o,e.response,"f"),t}switch(e.type){case"response.output_item.added":t.output.push(e.item);break;case"response.content_part.added":{const n=t.output[e.output_index];if(!n)throw new h.OpenAIError(`missing output at index ${e.output_index}`);"message"===n.type&&n.content.push(e.part);break}case"response.output_text.delta":{const n=t.output[e.output_index];if(!n)throw new h.OpenAIError(`missing output at index ${e.output_index}`);if("message"===n.type){const t=n.content[e.content_index];if(!t)throw new h.OpenAIError(`missing content at index ${e.content_index}`);if("output_text"!==t.type)throw new h.OpenAIError(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case"response.function_call_arguments.delta":{const n=t.output[e.output_index];if(!n)throw new h.OpenAIError(`missing output at index ${e.output_index}`);"function_call"===n.type&&(n.arguments+=e.delta);break}case"response.completed":d(this,o,e.response,"f")}return t},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=p(this,i,"f");if(!e)throw new h.OpenAIError("stream ended without producing a ChatCompletion");return e}}t.ResponseStream=g},6650:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableStreamToAsyncIterable=void 0,t.ReadableStreamToAsyncIterable=function(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}},6716:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._iterSSEMessages=t.Stream=void 0;const r=n(2212),s=n(9526),o=n(9724),i=n(6650),a=n(8757),c=n(9526);class l{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;return new l(async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const n of u(e,t))if(!r)if(n.data.startsWith("[DONE]"))r=!0;else if(null===n.event||n.event.startsWith("response.")||n.event.startsWith("transcript.")){let t;try{t=JSON.parse(n.data)}catch(s){throw s}if(t&&t.error)throw new c.APIError(void 0,t.error,void 0,(0,a.createResponseHeaders)(e.headers));yield t}else{let e;try{e=JSON.parse(n.data)}catch(s){throw s}if("error"==n.event)throw new c.APIError(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}r=!0}catch(s){if(s instanceof Error&&"AbortError"===s.name)return;throw s}finally{r||t.abort()}},t)}static fromReadableStream(e,t){let n=!1;return new l(async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const t of async function*(){const t=new o.LineDecoder,n=(0,i.ReadableStreamToAsyncIterable)(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())r||t&&(yield JSON.parse(t));r=!0}catch(s){if(s instanceof Error&&"AbortError"===s.name)return;throw s}finally{r||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new l(()=>r(e),this.controller),new l(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new r.ReadableStream({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:s}=await t.next();if(s)return e.close();const o=n.encode(JSON.stringify(r)+"\n");e.enqueue(o)}catch(r){e.error(r)}},async cancel(){await(t.return?.())}})}}async function*u(e,t){if(!e.body)throw t.abort(),new s.OpenAIError("Attempted to iterate over a response with no body");const n=new d,r=new o.LineDecoder,a=(0,i.ReadableStreamToAsyncIterable)(e.body);for await(const s of async function*(e){let t=new Uint8Array;for await(const n of e){if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"===typeof n?(new TextEncoder).encode(n):n;let r,s=new Uint8Array(t.length+e.length);for(s.set(t),s.set(e,t.length),t=s;-1!==(r=(0,o.findDoubleNewlineIndex)(t));)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}(a))for(const e of r.decode(s)){const t=n.decode(e);t&&(yield t)}for(const s of r.flush()){const e=n.decode(s);e&&(yield e)}}t.Stream=l,t._iterSSEMessages=u;class d{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e,t){const n=e.indexOf(t);if(-1!==n)return[e.substring(0,n),t,e.substring(n+t.length)];return[e,"",""]}(e,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}},7024:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CombinerRestClient=t.CombinerWebSocketClient=t.useBackend=t.BrowserBackend=void 0;var r=n(2917);Object.defineProperty(t,"BrowserBackend",{enumerable:!0,get:function(){return r.BrowserBackend}}),Object.defineProperty(t,"useBackend",{enumerable:!0,get:function(){return r.useBackend}});var s=n(3502);Object.defineProperty(t,"CombinerWebSocketClient",{enumerable:!0,get:function(){return s.CombinerWebSocketClient}});var o=n(4021);Object.defineProperty(t,"CombinerRestClient",{enumerable:!0,get:function(){return o.CombinerRestClient}})},7370:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Images=void 0;const i=n(2802),a=o(n(8757));class c extends i.APIResource{createVariation(e,t){return this._client.post("/images/variations",a.multipartFormRequestOptions({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",a.multipartFormRequestOptions({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}t.Images=c},7655:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Translations=void 0;const i=n(2802),a=o(n(8757));class c extends i.APIResource{create(e,t){return this._client.post("/audio/translations",a.multipartFormRequestOptions({body:e,...t,__metadata:{model:e.model}}))}}t.Translations=c},7730:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatCompletionStreamingRunner=void 0;const r=n(5126);class s extends r.ChatCompletionStream{static fromReadableStream(e){const t=new s(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){const r=new s(null),o={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,o)),r}static runTools(e,t,n){const r=new s(t),o={...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,o)),r}}t.ChatCompletionStreamingRunner=s},7733:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RunStepsPage=t.Steps=void 0;const r=n(2802),s=n(8757),o=n(2510);class i extends r.APIResource{retrieve(e,t,n,r={},o){return(0,s.isRequestOptions)(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...o,headers:{"OpenAI-Beta":"assistants=v2",...o?.headers}})}list(e,t,n={},r){return(0,s.isRequestOptions)(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,a,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...r?.headers}})}}t.Steps=i;class a extends o.CursorPage{}t.RunStepsPage=a,i.RunStepsPage=a},7759:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addOutputText=t.validateInputTools=t.shouldParseToolCall=t.isAutoParsableTool=t.makeParseableResponseTool=t.hasAutoParseableInput=t.parseResponse=t.maybeParseResponse=void 0;const r=n(9526),s=n(3357);function o(e,t){const n=e.output.map(e=>{if("function_call"===e.type)return{...e,parsed_arguments:u(t,e)};if("message"===e.type){const n=e.content.map(e=>"output_text"===e.type?{...e,parsed:i(t,e.text)}:e);return{...e,content:n}}return e}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||d(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const e of r.output)if("message"===e.type)for(const t of e.content)if("output_text"===t.type&&null!==t.parsed)return t.parsed;return null}}),r}function i(e,t){if("json_schema"!==e.text?.format?.type)return null;if("$parseRaw"in e.text?.format){const n=e.text?.format;return n.$parseRaw(t)}return JSON.parse(t)}function a(e){return!!(0,s.isAutoParsableResponseFormat)(e.text?.format)}function c(e){return"auto-parseable-tool"===e?.$brand}function l(e,t){return e.find(e=>"function"===e.type&&e.name===t)}function u(e,t){const n=l(e.tools??[],t.name);return{...t,...t,parsed_arguments:c(n)?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null}}function d(e){const t=[];for(const n of e.output)if("message"===n.type)for(const e of n.content)"output_text"===e.type&&t.push(e.text);e.output_text=t.join("")}t.maybeParseResponse=function(e,t){return t&&a(t)?o(e,t):{...e,output_parsed:null,output:e.output.map(e=>"function_call"===e.type?{...e,parsed_arguments:null}:"message"===e.type?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}},t.parseResponse=o,t.hasAutoParseableInput=a,t.makeParseableResponseTool=function(e,{parser:t,callback:n}){const r={...e};return Object.defineProperties(r,{$brand:{value:"auto-parseable-tool",enumerable:!1},$parseRaw:{value:t,enumerable:!1},$callback:{value:n,enumerable:!1}}),r},t.isAutoParsableTool=c,t.shouldParseToolCall=function(e,t){if(!e)return!1;const n=l(e.tools??[],t.name);return c(n)||n?.strict||!1},t.validateInputTools=function(e){for(const t of e??[]){if("function"!==t.type)throw new r.OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new r.OpenAIError(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}},t.addOutputText=d},7924:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FileListResponsesPage=t.Files=void 0;const i=n(2802),a=n(8757),c=o(n(8757)),l=o(n(5062)),u=n(5062),d=n(2510);class p extends i.APIResource{constructor(){super(...arguments),this.content=new l.Content(this._client)}create(e,t,n){return this._client.post(`/containers/${e}/files`,c.multipartFormRequestOptions({body:t,...n}))}retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}`,n)}list(e,t={},n){return(0,a.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,h,{query:t,...n})}del(e,t,n){return this._client.delete(`/containers/${e}/files/${t}`,{...n,headers:{Accept:"*/*",...n?.headers}})}}t.Files=p;class h extends d.CursorPage{}t.FileListResponsesPage=h,p.FileListResponsesPage=h,p.Content=u.Content},7949:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Completions=t.ChatCompletionsPage=t.ChatCompletionStoreMessagesPage=t.Chat=void 0;var r=n(6111);Object.defineProperty(t,"Chat",{enumerable:!0,get:function(){return r.Chat}});var s=n(2773);Object.defineProperty(t,"ChatCompletionStoreMessagesPage",{enumerable:!0,get:function(){return s.ChatCompletionStoreMessagesPage}}),Object.defineProperty(t,"ChatCompletionsPage",{enumerable:!0,get:function(){return s.ChatCompletionsPage}}),Object.defineProperty(t,"Completions",{enumerable:!0,get:function(){return s.Completions}})},8111:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Completions=t.ChatCompletionRunner=t.ChatCompletionStream=t.ParsingToolFunction=t.ParsingFunction=t.ChatCompletionStreamingRunner=void 0;const r=n(2802),s=n(4648),o=n(7730),i=n(5126),a=n(3357);var c=n(7730);Object.defineProperty(t,"ChatCompletionStreamingRunner",{enumerable:!0,get:function(){return c.ChatCompletionStreamingRunner}});var l=n(4691);Object.defineProperty(t,"ParsingFunction",{enumerable:!0,get:function(){return l.ParsingFunction}}),Object.defineProperty(t,"ParsingToolFunction",{enumerable:!0,get:function(){return l.ParsingToolFunction}});var u=n(5126);Object.defineProperty(t,"ChatCompletionStream",{enumerable:!0,get:function(){return u.ChatCompletionStream}});var d=n(4648);Object.defineProperty(t,"ChatCompletionRunner",{enumerable:!0,get:function(){return d.ChatCompletionRunner}});class p extends r.APIResource{parse(e,t){return(0,a.validateInputTools)(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(t=>(0,a.parseChatCompletion)(t,e))}runFunctions(e,t){return e.stream?o.ChatCompletionStreamingRunner.runFunctions(this._client,e,t):s.ChatCompletionRunner.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?o.ChatCompletionStreamingRunner.runTools(this._client,e,t):s.ChatCompletionRunner.runTools(this._client,e,t)}stream(e,t){return i.ChatCompletionStream.createChatCompletion(this._client,e,t)}}t.Completions=p},8348:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maybe_map=t.combine=t.is_buffer=t.is_regexp=t.compact=t.encode=t.decode=t.assign_single_source=t.merge=void 0;const r=n(5257),s=Object.prototype.hasOwnProperty,o=Array.isArray,i=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})();t.merge=function e(t,n,r={}){if(!n)return t;if("object"!==typeof n){if(o(t))t.push(n);else{if(!t||"object"!==typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!s.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(n);let i=t;return o(t)&&!o(n)&&(i=function(e,t){const n=t&&t.plainObjects?Object.create(null):{};for(let r=0;r<e.length;++r)"undefined"!==typeof e[r]&&(n[r]=e[r]);return n}(t,r)),o(t)&&o(n)?(n.forEach(function(n,o){if(s.call(t,o)){const s=t[o];s&&"object"===typeof s&&n&&"object"===typeof n?t[o]=e(s,n,r):t.push(n)}else t[o]=n}),t):Object.keys(n).reduce(function(t,o){const i=n[o];return s.call(t,o)?t[o]=e(t[o],i,r):t[o]=i,t},i)},t.assign_single_source=function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},t.decode=function(e,t,n){const r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(s){return r}};const a=1024;t.encode=(e,t,n,s,o)=>{if(0===e.length)return e;let c=e;if("symbol"===typeof e?c=Symbol.prototype.toString.call(e):"string"!==typeof e&&(c=String(e)),"iso-8859-1"===n)return escape(c).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let l="";for(let u=0;u<c.length;u+=a){const e=c.length>=a?c.slice(u,u+a):c,t=[];for(let n=0;n<e.length;++n){let s=e.charCodeAt(n);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||o===r.RFC1738&&(40===s||41===s)?t[t.length]=e.charAt(n):s<128?t[t.length]=i[s]:s<2048?t[t.length]=i[192|s>>6]+i[128|63&s]:s<55296||s>=57344?t[t.length]=i[224|s>>12]+i[128|s>>6&63]+i[128|63&s]:(n+=1,s=65536+((1023&s)<<10|1023&e.charCodeAt(n)),t[t.length]=i[240|s>>18]+i[128|s>>12&63]+i[128|s>>6&63]+i[128|63&s])}l+=t.join("")}return l},t.compact=function(e){const t=[{obj:{o:e},prop:"o"}],n=[];for(let r=0;r<t.length;++r){const e=t[r],s=e.obj[e.prop],o=Object.keys(s);for(let r=0;r<o.length;++r){const e=o[r],i=s[e];"object"===typeof i&&null!==i&&-1===n.indexOf(i)&&(t.push({obj:s,prop:e}),n.push(i))}}return function(e){for(;e.length>1;){const t=e.pop();if(!t)continue;const n=t.obj[t.prop];if(o(n)){const e=[];for(let t=0;t<n.length;++t)"undefined"!==typeof n[t]&&e.push(n[t]);t.obj[t.prop]=e}}}(t),e},t.is_regexp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.is_buffer=function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},t.combine=function(e,t){return[].concat(e,t)},t.maybe_map=function(e,t){if(o(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}},8757:function(e,t,n){"use strict";var r,s=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.isObj=t.toFloat32Array=t.toBase64=t.getHeader=t.getRequiredHeader=t.isHeadersProtocol=t.isRunningInBrowser=t.debug=t.hasOwn=t.isEmptyObj=t.maybeCoerceBoolean=t.maybeCoerceFloat=t.maybeCoerceInteger=t.coerceBoolean=t.coerceFloat=t.coerceInteger=t.readEnv=t.ensurePresent=t.castToError=t.sleep=t.safeJSON=t.isRequestOptions=t.createResponseHeaders=t.PagePromise=t.AbstractPage=t.APIClient=t.APIPromise=t.createForm=t.multipartFormRequestOptions=t.maybeMultipartFormRequestOptions=void 0;const i=n(5392),a=n(6716),c=n(9526),l=n(2212);(0,l.init)();const u=n(4042);var d=n(4042);async function p(e){const{response:t}=e;if(e.options.stream)return j("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):a.Stream.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type"),r=n?.split(";")[0]?.trim();if(r?.includes("application/json")||r?.endsWith("+json")){const e=await t.json();return j("response",t.status,t.url,t.headers,e),h(e,t)}const s=await t.text();return j("response",t.status,t.url,t.headers,s),s}function h(e,t){return!e||"object"!==typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}Object.defineProperty(t,"maybeMultipartFormRequestOptions",{enumerable:!0,get:function(){return d.maybeMultipartFormRequestOptions}}),Object.defineProperty(t,"multipartFormRequestOptions",{enumerable:!0,get:function(){return d.multipartFormRequestOptions}}),Object.defineProperty(t,"createForm",{enumerable:!0,get:function(){return d.createForm}});class f extends Promise{constructor(e,t=p){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new f(this.responsePromise,async t=>h(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}t.APIPromise=f;t.APIClient=class{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:s}){this.baseURL=e,this.maxRetries=A("maxRetries",t),this.timeout=A("timeout",n),this.httpAgent=r,this.fetch=s??l.fetch}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...P(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${I()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async n=>{const r=n&&(0,u.isBlobLike)(n?.body)?new DataView(await n.body.arrayBuffer()):n?.body instanceof DataView?n.body:n?.body instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n?.body)?new DataView(n.body.buffer):n?.body;return{method:e,path:t,...n,body:r}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"===typeof e){if("undefined"!==typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!==typeof TextEncoder){return(new TextEncoder).encode(e).length.toString()}}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){const n={...e},{method:r,path:s,query:o,headers:i={}}=n,a=ArrayBuffer.isView(n.body)||n.__binaryRequest&&"string"===typeof n.body?n.body:(0,u.isMultipartBody)(n.body)?n.body.body:n.body?JSON.stringify(n.body,null,2):null,c=this.calculateContentLength(a),d=this.buildURL(s,o);"timeout"in n&&A("timeout",n.timeout),n.timeout=n.timeout??this.timeout;const p=n.httpAgent??this.httpAgent??(0,l.getDefaultAgent)(d),h=n.timeout+1e3;"number"===typeof p?.options?.timeout&&h>(p.options.timeout??0)&&(p.options.timeout=h),this.idempotencyHeader&&"get"!==r&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);return{req:{method:r,...a&&{body:a},headers:this.buildHeaders({options:n,headers:i,contentLength:c,retryCount:t}),...p&&{agent:p},signal:n.signal??null},url:d,timeout:n.timeout}}buildHeaders({options:e,headers:n,contentLength:r,retryCount:s}){const o={};r&&(o["content-length"]=r);const i=this.defaultHeaders(e);return C(o,i),C(o,n),(0,u.isMultipartBody)(e.body)&&"node"!==l.kind&&delete o["content-type"],void 0===(0,t.getHeader)(i,"x-stainless-retry-count")&&void 0===(0,t.getHeader)(n,"x-stainless-retry-count")&&(o["x-stainless-retry-count"]=String(s)),void 0===(0,t.getHeader)(i,"x-stainless-timeout")&&void 0===(0,t.getHeader)(n,"x-stainless-timeout")&&e.timeout&&(o["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(o,n),o}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,n,r){return c.APIError.generate(e,t,n,r)}request(e,t=null){return new f(this.makeRequest(e,t))}async makeRequest(e,n){const r=await e,s=r.maxRetries??this.maxRetries;null==n&&(n=s),await this.prepareOptions(r);const{req:o,url:i,timeout:a}=this.buildRequest(r,{retryCount:s-n});if(await this.prepareRequest(o,{url:i,options:r}),j("request",i,r,o.headers),r.signal?.aborted)throw new c.APIUserAbortError;const l=new AbortController,u=await this.fetchWithTimeout(i,o,a,l).catch(t.castToError);if(u instanceof Error){if(r.signal?.aborted)throw new c.APIUserAbortError;if(n)return this.retryRequest(r,n);if("AbortError"===u.name)throw new c.APIConnectionTimeoutError;throw new c.APIConnectionError({cause:u})}const d=(0,t.createResponseHeaders)(u.headers);if(!u.ok){if(n&&this.shouldRetry(u)){return j(`response (error; ${`retrying, ${n} attempts remaining`})`,u.status,i,d),this.retryRequest(r,n,d)}const e=await u.text().catch(e=>(0,t.castToError)(e).message),s=(0,t.safeJSON)(e),o=s?void 0:e;j(`response (error; ${n?"(error; no more retries left)":"(error; not retryable)"})`,u.status,i,d,o);throw this.makeStatusError(u.status,s,o,d)}return{response:u,options:r,controller:l}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new g(this,n,e)}buildURL(e,t){const n=E(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return S(r)||(t={...r,...t}),"object"===typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>"undefined"!==typeof t).map(([e,t])=>{if("string"===typeof t||"number"===typeof t||"boolean"===typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new c.OpenAIError(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:s,...o}=t||{};s&&s.addEventListener("abort",()=>r.abort());const i=setTimeout(()=>r.abort(),n),a={signal:r.signal,...o};return a.method&&(a.method=a.method.toUpperCase()),this.fetch.call(void 0,e,a).finally(()=>{clearTimeout(i)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,n,r){let s;const o=r?.["retry-after-ms"];if(o){const e=parseFloat(o);Number.isNaN(e)||(s=e)}const i=r?.["retry-after"];if(i&&!s){const e=parseFloat(i);s=Number.isNaN(e)?Date.parse(i)-Date.now():1e3*e}if(!(s&&0<=s&&s<6e4)){const t=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,t)}return await(0,t.sleep)(s),this.makeRequest(e,n-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${i.VERSION}`}};class m{constructor(e,t,n,o){r.set(this,void 0),s(this,r,e,"f"),this.options=o,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new c.OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"===typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,r]of n)e.url.searchParams.set(t,r);t.query=void 0,t.path=e.url.toString()}return await o(this,r,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(r=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}t.AbstractPage=m;class g extends f{constructor(e,t,n){super(t,async t=>new n(e,t.response,await p(t),t.options))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}t.PagePromise=g;t.createResponseHeaders=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}});const y={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0};t.isRequestOptions=e=>"object"===typeof e&&null!==e&&!S(e)&&Object.keys(e).every(e=>R(y,e));const b=()=>{if("undefined"!==typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":i.VERSION,"X-Stainless-OS":v(Deno.build.os),"X-Stainless-Arch":w(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"===typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!==typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":i.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":i.VERSION,"X-Stainless-OS":v(process.platform),"X-Stainless-Arch":w(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"===typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":i.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":i.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const w=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",v=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let _;const P=()=>_??(_=b());t.safeJSON=e=>{try{return JSON.parse(e)}catch(t){return}};const O=/^[a-z][a-z0-9+.-]*:/i,E=e=>O.test(e);t.sleep=e=>new Promise(t=>setTimeout(t,e));const A=(e,t)=>{if("number"!==typeof t||!Number.isInteger(t))throw new c.OpenAIError(`${e} must be an integer`);if(t<0)throw new c.OpenAIError(`${e} must be a positive integer`);return t};t.castToError=e=>{if(e instanceof Error)return e;if("object"===typeof e&&null!==e)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)};t.ensurePresent=e=>{if(null==e)throw new c.OpenAIError(`Expected a value to be given but received ${e} instead.`);return e};t.readEnv=e=>"undefined"!==typeof process?process.env?.[e]?.trim()??void 0:"undefined"!==typeof Deno?Deno.env?.get?.(e)?.trim():void 0;t.coerceInteger=e=>{if("number"===typeof e)return Math.round(e);if("string"===typeof e)return parseInt(e,10);throw new c.OpenAIError(`Could not coerce ${e} (type: ${typeof e}) into a number`)};t.coerceFloat=e=>{if("number"===typeof e)return e;if("string"===typeof e)return parseFloat(e);throw new c.OpenAIError(`Could not coerce ${e} (type: ${typeof e}) into a number`)};t.coerceBoolean=e=>"boolean"===typeof e?e:"string"===typeof e?"true"===e:Boolean(e);t.maybeCoerceInteger=e=>{if(void 0!==e)return(0,t.coerceInteger)(e)};t.maybeCoerceFloat=e=>{if(void 0!==e)return(0,t.coerceFloat)(e)};function S(e){if(!e)return!0;for(const t in e)return!1;return!0}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function C(e,t){for(const n in t){if(!R(t,n))continue;const r=n.toLowerCase();if(!r)continue;const s=t[n];null===s?delete e[r]:void 0!==s&&(e[r]=s)}}t.maybeCoerceBoolean=e=>{if(void 0!==e)return(0,t.coerceBoolean)(e)},t.isEmptyObj=S,t.hasOwn=R;const x=new Set(["authorization","api-key"]);function j(e,...t){if("undefined"!==typeof process&&"true"===process?.env?.DEBUG){t.map(e=>{if(!e)return e;if(e.headers){const t={...e,headers:{...e.headers}};for(const n in e.headers)x.has(n.toLowerCase())&&(t.headers[n]="REDACTED");return t}let t=null;for(const n in e)x.has(n.toLowerCase())&&(t??(t={...e}),t[n]="REDACTED");return t??e})}}t.debug=j;const I=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)});t.isRunningInBrowser=()=>"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof navigator;t.isHeadersProtocol=e=>"function"===typeof e?.get;t.getRequiredHeader=(e,n)=>{const r=(0,t.getHeader)(e,n);if(void 0===r)throw new Error(`Could not find ${n} header`);return r};t.getHeader=(e,n)=>{const r=n.toLowerCase();if((0,t.isHeadersProtocol)(e)){const t=n[0]?.toUpperCase()+n.substring(1).replace(/([^\w])(\w)/g,(e,t,n)=>t+n.toUpperCase());for(const s of[n,r,n.toUpperCase(),t]){const t=e.get(s);if(t)return t}}for(const[t,s]of Object.entries(e))if(t.toLowerCase()===r)return Array.isArray(s)?(s.length,s[0]):s};t.toBase64=e=>{if(!e)return"";if("undefined"!==typeof Buffer)return Buffer.from(e).toString("base64");if("undefined"!==typeof btoa)return btoa(e);throw new c.OpenAIError("Cannot generate b64 string; Expected `Buffer` or `btoa` to be defined")};t.toFloat32Array=e=>{if("undefined"!==typeof Buffer){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return Array.from(new Float32Array(r.buffer))}},t.isObj=function(e){return null!=e&&"object"===typeof e&&!Array.isArray(e)}},8868:function(e,t,n){"use strict";var r,s,o,i,a,c,l,u,d,p,h,f,m,g,y,b,w,v,_,P,O,E,A=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),S=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),R=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&A(t,e,n);return S(t,e),t},C=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},x=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.AssistantStream=void 0;const j=R(n(8757)),I=n(6716),T=n(9526),M=n(460);class k extends M.EventStream{constructor(){super(...arguments),r.add(this),s.set(this,[]),o.set(this,{}),i.set(this,{}),a.set(this,void 0),c.set(this,void 0),l.set(this,void 0),u.set(this,void 0),d.set(this,void 0),p.set(this,void 0),h.set(this,void 0),f.set(this,void 0),m.set(this,void 0)}[(s=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,d=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap,m=new WeakMap,r=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new k;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=I.Stream.fromReadableStream(e,this.controller);for await(const o of s)C(this,r,"m",g).call(this,o);if(s.controller.signal?.aborted)throw new T.APIUserAbortError;return this._addRun(C(this,r,"m",y).call(this))}toReadableStream(){return new I.Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,s){const o=new k;return o._run(()=>o._runToolAssistantStream(e,t,n,r,{...s,headers:{...s?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,n,s,o){const i=o?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const a={...s,stream:!0},c=await e.submitToolOutputs(t,n,a,{...o,signal:this.controller.signal});this._connected();for await(const l of c)C(this,r,"m",g).call(this,l);if(c.controller.signal?.aborted)throw new T.APIUserAbortError;return this._addRun(C(this,r,"m",y).call(this))}static createThreadAssistantStream(e,t,n){const r=new k;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const s=new k;return s._run(()=>s._runAssistantStream(e,t,n,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),s}currentEvent(){return C(this,h,"f")}currentRun(){return C(this,f,"f")}currentMessageSnapshot(){return C(this,a,"f")}currentRunStepSnapshot(){return C(this,m,"f")}async finalRunSteps(){return await this.done(),Object.values(C(this,o,"f"))}async finalMessages(){return await this.done(),Object.values(C(this,i,"f"))}async finalRun(){if(await this.done(),!C(this,c,"f"))throw Error("Final run was not received.");return C(this,c,"f")}async _createThreadAssistantStream(e,t,n){const s=n?.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const o={...t,stream:!0},i=await e.createAndRun(o,{...n,signal:this.controller.signal});this._connected();for await(const a of i)C(this,r,"m",g).call(this,a);if(i.controller.signal?.aborted)throw new T.APIUserAbortError;return this._addRun(C(this,r,"m",y).call(this))}async _createAssistantStream(e,t,n,s){const o=s?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const i={...n,stream:!0},a=await e.create(t,i,{...s,signal:this.controller.signal});this._connected();for await(const c of a)C(this,r,"m",g).call(this,c);if(a.controller.signal?.aborted)throw new T.APIUserAbortError;return this._addRun(C(this,r,"m",y).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(null!==t&&void 0!==t)if("index"!==n&&"type"!==n){if("string"===typeof t&&"string"===typeof r)t+=r;else if("number"===typeof t&&"number"===typeof r)t+=r;else{if(!j.isObj(t)||!j.isObj(r)){if(Array.isArray(t)&&Array.isArray(r)){if(t.every(e=>"string"===typeof e||"number"===typeof e)){t.push(...r);continue}for(const e of r){if(!j.isObj(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const n=e.index;if(null==n)throw new Error("Expected array delta entry to have an `index` property");if("number"!==typeof n)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);const r=t[n];null==r?t.push(e):t[n]=this.accumulateDelta(r,e)}continue}throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${t}`)}t=this.accumulateDelta(t,r)}e[n]=t}else e[n]=r;else e[n]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,s){return await this._createToolAssistantStream(n,e,t,r,s)}}t.AssistantStream=k,g=function(e){if(!this.ended)switch(x(this,h,e,"f"),C(this,r,"m",v).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":C(this,r,"m",E).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":C(this,r,"m",w).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":C(this,r,"m",b).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},y=function(){if(this.ended)throw new T.OpenAIError("stream has ended, this shouldn't happen");if(!C(this,c,"f"))throw Error("Final run has not been received");return C(this,c,"f")},b=function(e){const[t,n]=C(this,r,"m",P).call(this,e,C(this,a,"f"));x(this,a,t,"f"),C(this,i,"f")[t.id]=t;for(const r of n){const e=t.content[r.index];"text"==e?.type&&this._emit("textCreated",e.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,r=t.content[n.index];if(!r||"text"!=r.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,r.text)}if(n.index!=C(this,l,"f")){if(C(this,u,"f"))switch(C(this,u,"f").type){case"text":this._emit("textDone",C(this,u,"f").text,C(this,a,"f"));break;case"image_file":this._emit("imageFileDone",C(this,u,"f").image_file,C(this,a,"f"))}x(this,l,n.index,"f")}x(this,u,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==C(this,l,"f")){const t=e.data.content[C(this,l,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,C(this,a,"f"));break;case"text":this._emit("textDone",t.text,C(this,a,"f"))}}C(this,a,"f")&&this._emit("messageDone",e.data),x(this,a,void 0,"f")}},w=function(e){const t=C(this,r,"m",_).call(this,e);switch(x(this,m,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of n.step_details.tool_calls)e.index==C(this,d,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(C(this,p,"f")&&this._emit("toolCallDone",C(this,p,"f")),x(this,d,e.index,"f"),x(this,p,t.step_details.tool_calls[e.index],"f"),C(this,p,"f")&&this._emit("toolCallCreated",C(this,p,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":x(this,m,void 0,"f");"tool_calls"==e.data.step_details.type&&C(this,p,"f")&&(this._emit("toolCallDone",C(this,p,"f")),x(this,p,void 0,"f")),this._emit("runStepDone",e.data,t)}},v=function(e){C(this,s,"f").push(e),this._emit("event",e)},_=function(e){switch(e.event){case"thread.run.step.created":return C(this,o,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=C(this,o,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=k.accumulateDelta(t,n.delta);C(this,o,"f")[e.data.id]=r}return C(this,o,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":C(this,o,"f")[e.data.id]=e.data}if(C(this,o,"f")[e.data.id])return C(this,o,"f")[e.data.id];throw new Error("No snapshot available")},P=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const e of s.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=C(this,r,"m",O).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},O=function(e,t){return k.accumulateDelta(t,e)},E=function(e){switch(x(this,f,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.cancelling":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":x(this,c,e.data,"f"),C(this,p,"f")&&(this._emit("toolCallDone",C(this,p,"f")),x(this,p,void 0,"f"))}}},8978:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(331),t)},9045:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Completions=void 0;const r=n(2802);class s extends r.APIResource{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}t.Completions=s},9458:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModelsPage=t.Models=void 0;const r=n(2802),s=n(2510);class o extends r.APIResource{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",i,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}t.Models=o;class i extends s.Page{}t.ModelsPage=i,o.ModelsPage=i},9501:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatCompletionStoreMessagesPage=t.Messages=void 0;const r=n(2802),s=n(8757),o=n(3054);Object.defineProperty(t,"ChatCompletionStoreMessagesPage",{enumerable:!0,get:function(){return o.ChatCompletionStoreMessagesPage}});class i extends r.APIResource{list(e,t={},n){return(0,s.isRequestOptions)(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,o.ChatCompletionStoreMessagesPage,{query:t,...n})}}t.Messages=i},9526:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentFilterFinishReasonError=t.LengthFinishReasonError=t.InternalServerError=t.RateLimitError=t.UnprocessableEntityError=t.ConflictError=t.NotFoundError=t.PermissionDeniedError=t.AuthenticationError=t.BadRequestError=t.APIConnectionTimeoutError=t.APIConnectionError=t.APIUserAbortError=t.APIError=t.OpenAIError=void 0;const r=n(8757);class s extends Error{}t.OpenAIError=s;class o extends s{constructor(e,t,n,r){super(`${o.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.request_id=r?.["x-request-id"],this.error=t;const s=t;this.code=s?.code,this.param=s?.param,this.type=s?.type}static makeMessage(e,t,n){const r=t?.message?"string"===typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,s){if(!e||!s)return new i({message:n,cause:(0,r.castToError)(t)});const m=t?.error;return 400===e?new a(e,m,n,s):401===e?new c(e,m,n,s):403===e?new l(e,m,n,s):404===e?new u(e,m,n,s):409===e?new d(e,m,n,s):422===e?new p(e,m,n,s):429===e?new h(e,m,n,s):e>=500?new f(e,m,n,s):new o(e,m,n,s)}}t.APIError=o;t.APIUserAbortError=class extends o{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}};class i extends o{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}t.APIConnectionError=i;t.APIConnectionTimeoutError=class extends i{constructor({message:e}={}){super({message:e??"Request timed out."})}};class a extends o{}t.BadRequestError=a;class c extends o{}t.AuthenticationError=c;class l extends o{}t.PermissionDeniedError=l;class u extends o{}t.NotFoundError=u;class d extends o{}t.ConflictError=d;class p extends o{}t.UnprocessableEntityError=p;class h extends o{}t.RateLimitError=h;class f extends o{}t.InternalServerError=f;t.LengthFinishReasonError=class extends s{constructor(){super("Could not parse response content as the length limit was reached")}};t.ContentFilterFinishReasonError=class extends s{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}},9724:function(e,t,n){"use strict";var r,s=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.findDoubleNewlineIndex=t.LineDecoder=void 0;const i=n(9526);class a{constructor(){r.set(this,void 0),this.buffer=new Uint8Array,s(this,r,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"===typeof e?(new TextEncoder).encode(e):e;let n=new Uint8Array(this.buffer.length+t.length);n.set(this.buffer),n.set(t,this.buffer.length),this.buffer=n;const i=[];let a;for(;null!=(a=c(this.buffer,o(this,r,"f")));){if(a.carriage&&null==o(this,r,"f")){s(this,r,a.index,"f");continue}if(null!=o(this,r,"f")&&(a.index!==o(this,r,"f")+1||a.carriage)){i.push(this.decodeText(this.buffer.slice(0,o(this,r,"f")-1))),this.buffer=this.buffer.slice(o(this,r,"f")),s(this,r,null,"f");continue}const e=null!==o(this,r,"f")?a.preceding-1:a.preceding,t=this.decodeText(this.buffer.slice(0,e));i.push(t),this.buffer=this.buffer.slice(a.index),s(this,r,null,"f")}return i}decodeText(e){if(null==e)return"";if("string"===typeof e)return e;if("undefined"!==typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new i.OpenAIError(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!==typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new i.OpenAIError(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new i.OpenAIError("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode("\n"):[]}}function c(e,t){for(let n=t??0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}t.LineDecoder=a,r=new WeakMap,a.NEWLINE_CHARS=new Set(["\n","\r"]),a.NEWLINE_REGEXP=/\r\n|[\n\r]/g,t.findDoubleNewlineIndex=function(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}},9777:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Graders=void 0;const i=n(2802),a=o(n(5137)),c=n(5137);class l extends i.APIResource{constructor(){super(...arguments),this.graderModels=new a.GraderModels(this._client)}}t.Graders=l,l.GraderModels=c.GraderModels}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};(()=>{"use strict";const e=n(1985),t=n(2946);new e.ContentHandlingScript,new t.CommonBackgroundScript})()})();